"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4899],{48736:function(e,s,a){a.d(s,{Z:function(){return l}});let l=(0,a(79205).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},53417:function(e,s,a){a.d(s,{Z:function(){return l}});let l=(0,a(79205).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},92369:function(e,s,a){a.d(s,{Z:function(){return l}});let l=(0,a(79205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},4899:function(e,s,a){a.d(s,{w:function(){return b}});var l=a(57437),t=a(2265),r=a(74291),n=a(69174),c=a(79820),d=a(33804),x=a(12381),i=a(44794),m=a(92369),h=a(31047),o=a(48736),g=a(53417);let j=(0,a(79205).Z)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);var y=a(42208),u=a(80719);function b(e){let{record:s,isOpen:a,onClose:b,onViewItemHistory:p}=e,[N,f]=(0,t.useState)(null),[v,k]=(0,t.useState)(null);if(!s)return null;let Z=e=>new Intl.DateTimeFormat("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(e),w=e=>e>0?"text-green-600":e<0?"text-red-600":"text-gray-600",C=e=>e>0?"↗️":e<0?"↘️":"→",q=(e,s)=>{p&&p(e,s)};return(0,l.jsx)(r.Vq,{open:a,onOpenChange:b,children:(0,l.jsxs)(r.cZ,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,l.jsx)(r.fK,{children:(0,l.jsx)(r.$N,{className:"text-xl font-bold text-gray-800",children:"庫存動作詳情"})}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)(c.Zb,{className:"border-l-4 border-l-blue-500",children:[(0,l.jsx)(c.Ol,{className:"pb-3",children:(0,l.jsxs)(c.ll,{className:"text-lg text-gray-800 flex items-center gap-2",children:[(0,l.jsx)(i.Z,{className:"h-5 w-5 text-blue-500"}),"動作基本資訊"]})}),(0,l.jsx)(c.aY,{className:"space-y-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"變動原因"}),(0,l.jsx)("div",{className:"mt-1",children:(0,l.jsx)(n.C,{variant:"outline",className:"text-sm ".concat("purchase"===s.changeReason?"border-green-200 text-green-700 bg-green-50":"workorder"===s.changeReason?"border-orange-200 text-orange-700 bg-orange-50":"inventory_check"===s.changeReason?"border-blue-200 text-blue-700 bg-blue-50":"border-gray-200 text-gray-700 bg-gray-50"),children:(0,u.bU)(s.changeReason)})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"影響項目數量"}),(0,l.jsxs)("div",{className:"mt-1 text-2xl font-bold text-blue-600",children:[s.details.length," 項"]})]})]})})]}),(0,l.jsxs)(c.Zb,{className:"border-l-4 border-l-purple-500",children:[(0,l.jsx)(c.Ol,{className:"pb-3",children:(0,l.jsxs)(c.ll,{className:"text-lg text-gray-800 flex items-center gap-2",children:[(0,l.jsx)(m.Z,{className:"h-5 w-5 text-purple-500"}),"操作資訊"]})}),(0,l.jsxs)(c.aY,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"操作人員"}),(0,l.jsx)("div",{className:"mt-1 text-sm bg-gray-50 px-3 py-2 rounded-md border",children:s.operatorName})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"操作時間"}),(0,l.jsxs)("div",{className:"mt-1 text-sm bg-gray-50 px-3 py-2 rounded-md border flex items-center gap-2",children:[(0,l.jsx)(h.Z,{className:"h-4 w-4 text-gray-500"}),Z(s.changeDate)]})]})]}),s.relatedDocumentId&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"相關文件"}),(0,l.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,l.jsx)(o.Z,{className:"h-4 w-4 text-gray-500"}),(0,l.jsxs)("span",{className:"text-sm bg-blue-50 px-3 py-2 rounded-md border text-blue-700",children:[s.relatedDocumentType||"相關文件",": ",s.relatedDocumentId]})]})]})]})]}),s.remarks&&(0,l.jsxs)(c.Zb,{className:"border-l-4 border-l-orange-500",children:[(0,l.jsx)(c.Ol,{className:"pb-3",children:(0,l.jsxs)(c.ll,{className:"text-lg text-gray-800 flex items-center gap-2",children:[(0,l.jsx)(g.Z,{className:"h-5 w-5 text-orange-500"}),"備註"]})}),(0,l.jsx)(c.aY,{children:(0,l.jsx)("div",{className:"text-sm bg-orange-50 px-4 py-3 rounded-md border border-orange-200 text-orange-800",children:s.remarks})})]}),(0,l.jsxs)(c.Zb,{className:"border-l-4 border-l-green-500",children:[(0,l.jsx)(c.Ol,{className:"pb-3",children:(0,l.jsxs)(c.ll,{className:"text-lg text-gray-800 flex items-center gap-2",children:[(0,l.jsx)(j,{className:"h-5 w-5 text-green-500"}),"影響項目明細 (",s.details.length," 項)"]})}),(0,l.jsx)(c.aY,{children:(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)(d.iA,{children:[(0,l.jsx)(d.xD,{children:(0,l.jsxs)(d.SC,{children:[(0,l.jsx)(d.ss,{children:"類型"}),(0,l.jsx)(d.ss,{children:"編號"}),(0,l.jsx)(d.ss,{children:"名稱"}),(0,l.jsx)(d.ss,{children:"變動數量"}),(0,l.jsx)(d.ss,{children:"變動後數量"}),(0,l.jsx)(d.ss,{children:"操作"})]})}),(0,l.jsx)(d.RM,{children:s.details.map((e,s)=>(0,l.jsxs)(d.SC,{children:[(0,l.jsx)(d.pj,{children:(0,l.jsx)(n.C,{variant:"secondary",className:"text-xs",children:(0,u.AZ)(e.itemType)})}),(0,l.jsx)(d.pj,{className:"font-mono text-sm",children:e.itemCode}),(0,l.jsx)(d.pj,{className:"text-sm",children:e.itemName}),(0,l.jsx)(d.pj,{children:(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsxs)("span",{className:"font-bold ".concat(w(e.quantityChange)),children:[C(e.quantityChange)," ",Math.abs(e.quantityChange)]}),(0,l.jsx)(n.C,{variant:e.quantityChange>0?"default":"destructive",className:"text-xs",children:e.quantityChange>0?"增加":e.quantityChange<0?"減少":"無變動"})]})}),(0,l.jsx)(d.pj,{className:"font-bold text-gray-800",children:e.quantityAfter}),(0,l.jsx)(d.pj,{children:(0,l.jsxs)(x.z,{variant:"outline",size:"sm",onClick:()=>q(e.itemId,e.itemType),className:"text-xs",children:[(0,l.jsx)(y.Z,{className:"h-3 w-3 mr-1"}),"查看歷史"]})})]},s))})]})})})]}),(0,l.jsxs)(c.Zb,{className:"border-l-4 border-l-gray-500",children:[(0,l.jsx)(c.Ol,{className:"pb-3",children:(0,l.jsxs)(c.ll,{className:"text-lg text-gray-800 flex items-center gap-2",children:[(0,l.jsx)(i.Z,{className:"h-5 w-5 text-gray-500"}),"系統資訊"]})}),(0,l.jsx)(c.aY,{children:(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:["建立時間：",Z(s.createdAt)]})})]})]})]})})}}}]);