"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[195],{88906:function(e,s,r){r.d(s,{Z:function(){return l}});let l=(0,r(79205).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},76865:function(e,s,r){r.d(s,{Z:function(){return l}});let l=(0,r(79205).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},5960:function(e,s,r){r.d(s,{Z:function(){return I}});var l=r(57437),t=r(2265),a=r(29501),c=r(13590),n=r(67119),o=r(1850),i=r(5978),d=r(46410),x=r(14438),h=r(93448);function m(e){let{category:s,className:r,size:t="md"}=e,a={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},c=e=>{let s={原料:"text-emerald-600",包材:"text-blue-600",香精:"text-pink-600",添加劑:"text-purple-600",設備:"text-slate-600",工具:"text-orange-600",耗材:"text-amber-600",其他:"text-indigo-600",111:"text-green-600",A1:"text-emerald-600",222:"text-orange-600",B1:"text-purple-600",default:"text-gray-600"};return s[e]||s.default};return(0,l.jsx)("div",{className:(0,h.cn)("flex items-center justify-center",r),children:(e=>{let s=c(e);switch(e){case"原料":case"111":return(0,l.jsxs)("svg",{className:(0,h.cn)(a[t],s),fill:"currentColor",viewBox:"0 0 24 24",children:[(0,l.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"}),(0,l.jsx)("circle",{cx:"8.5",cy:"14.5",r:"1.5"}),(0,l.jsx)("circle",{cx:"15.5",cy:"14.5",r:"1.5"}),(0,l.jsx)("circle",{cx:"12",cy:"11",r:"1.5"})]});case"包材":case"A1":return(0,l.jsxs)("svg",{className:(0,h.cn)(a[t],s),fill:"currentColor",viewBox:"0 0 24 24",children:[(0,l.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"}),(0,l.jsx)("path",{d:"M12 6l-3 2v8l3 2 3-2V8l-3-2z"}),(0,l.jsx)("path",{d:"M9 8h6v6H9z"})]});case"香精":return(0,l.jsxs)("svg",{className:(0,h.cn)(a[t],s),fill:"currentColor",viewBox:"0 0 24 24",children:[(0,l.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"}),(0,l.jsx)("path",{d:"M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"}),(0,l.jsx)("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z"})]});case"添加劑":case"222":return(0,l.jsxs)("svg",{className:(0,h.cn)(a[t],s),fill:"currentColor",viewBox:"0 0 24 24",children:[(0,l.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"}),(0,l.jsx)("path",{d:"M9 7h6v2H9z"}),(0,l.jsx)("path",{d:"M9 11h6v2H9z"}),(0,l.jsx)("path",{d:"M9 15h6v2H9z"}),(0,l.jsx)("circle",{cx:"12",cy:"9",r:"1"}),(0,l.jsx)("circle",{cx:"12",cy:"13",r:"1"}),(0,l.jsx)("circle",{cx:"12",cy:"17",r:"1"})]});case"設備":return(0,l.jsx)("svg",{className:(0,h.cn)(a[t],s),fill:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"})});case"工具":case"B1":return(0,l.jsxs)("svg",{className:(0,h.cn)(a[t],s),fill:"currentColor",viewBox:"0 0 24 24",children:[(0,l.jsx)("path",{d:"M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"}),(0,l.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})]});case"耗材":return(0,l.jsxs)("svg",{className:(0,h.cn)(a[t],s),fill:"currentColor",viewBox:"0 0 24 24",children:[(0,l.jsx)("path",{d:"M15.67 4H14V2h-4v2H8.33C7.6 4 7 4.6 7 5.33v15.33C7 21.4 7.6 22 8.33 22h7.33c.74 0 1.34-.6 1.34-1.33V5.33C17 4.6 16.4 4 15.67 4zM13 18h-2v-2h2v2zm0-4h-2V9h2v5z"}),(0,l.jsx)("path",{d:"M9 7h6v2H9z"}),(0,l.jsx)("path",{d:"M9 11h6v2H9z"}),(0,l.jsx)("path",{d:"M9 15h6v2H9z"})]});case"其他":return(0,l.jsxs)("svg",{className:(0,h.cn)(a[t],s),fill:"currentColor",viewBox:"0 0 24 24",children:[(0,l.jsx)("path",{d:"M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5zM12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),(0,l.jsx)("path",{d:"M12 6c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z"}),(0,l.jsx)("circle",{cx:"12",cy:"10",r:"2"})]});default:return(0,l.jsxs)("svg",{className:(0,h.cn)(a[t],s),fill:"currentColor",viewBox:"0 0 24 24",children:[(0,l.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-5 14H4v-4h11v4zm0-5H4V9h11v4zm5 5h-4V9h4v9z"}),(0,l.jsx)("path",{d:"M12 6l-3 2v8l3 2 3-2V8l-3-2z"}),(0,l.jsx)("path",{d:"M9 8h6v6H9z"})]})}})(s)})}var u=r(12381),p=r(74291),j=r(80670),g=r(40279),v=r(15291),f=r(23675),b=r(44794),y=r(62720);let N=(0,r(79205).Z)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);var w=r(60044),z=r(88906);let C=n.Ry({name:n.Z_().min(2,{message:"物料名稱至少需要 2 個字元"}),category:n.Z_().min(1,{message:"請選擇主分類"}),subCategory:n.Z_().min(1,{message:"請選擇細分分類"}),supplierId:n.Z_().optional(),currentStock:n.oQ.number().min(0,{message:"現有庫存不能為負數"}).optional(),safetyStockLevel:n.oQ.number({message:"安全庫存必須為數字"}).optional(),costPerUnit:n.oQ.number().min(0,{message:"單位成本不能為負數"}).optional(),unit:n.Z_().optional(),notes:n.Z_().optional()});function I(e){let{isOpen:s,onOpenChange:n,onMaterialUpdate:h,materialData:I}=e,[M,k]=(0,t.useState)(!1),[H,V]=(0,t.useState)([]),[S,B]=(0,t.useState)([]),[Z,L]=(0,t.useState)([]),P=!!I,X=(0,a.cI)({resolver:(0,c.F)(C),defaultValues:{name:"",category:"",subCategory:"",supplierId:"none",safetyStockLevel:0,costPerUnit:0,unit:"個",notes:""}}),A=X.watch("category"),G=X.watch("subCategory"),[E,Q]=(0,t.useState)("");(0,t.useEffect)(()=>{A&&G&&!P&&(async()=>{try{let{generateUniqueMaterialCode:e}=await Promise.resolve().then(r.bind(r,93448)),s=await _(A),l=await J(G),t=await e(s,l,d.db);Q(t)}catch(e){console.error("生成物料代號失敗:",e),Q("生成失敗")}})()},[A,G,P]);let _=async e=>{try{if(!d.db)throw Error("Firebase 未初始化");let{collection:s,getDocs:l,query:t,where:a}=await Promise.resolve().then(r.bind(r,5978)),c=t(s(d.db,"materialCategories"),a("name","==",e)),n=await l(c);if(!n.empty)return n.docs[0].data().id||"XX";let{generateCategoryId:o}=await Promise.resolve().then(r.bind(r,93448));return o()}catch(e){return console.error("獲取主分類ID失敗:",e),"XX"}},J=async e=>{try{if(!d.db)throw Error("Firebase 未初始化");let{collection:s,getDocs:l,query:t,where:a}=await Promise.resolve().then(r.bind(r,5978)),c=t(s(d.db,"materialSubCategories"),a("name","==",e)),n=await l(c);if(!n.empty)return n.docs[0].data().id||"000";let{generateSubCategoryId:o}=await Promise.resolve().then(r.bind(r,93448));return o()}catch(e){return console.error("獲取細分分類ID失敗:",e),"000"}},W=e=>{if(9!==e.length)return(0,l.jsx)("span",{className:"text-muted-foreground",children:"等待生成..."});let s=e.substring(0,2),r=e.substring(2,5),t=e.substring(5,9);return(0,l.jsxs)("div",{className:"flex items-center gap-1 text-sm font-mono",children:[(0,l.jsx)("span",{className:"bg-blue-100 text-blue-800 px-1 rounded",children:s}),(0,l.jsx)("span",{className:"text-muted-foreground",children:"+"}),(0,l.jsx)("span",{className:"bg-green-100 text-green-800 px-1 rounded",children:r}),(0,l.jsx)("span",{className:"text-muted-foreground",children:"+"}),(0,l.jsx)("span",{className:"bg-purple-100 text-purple-800 px-1 rounded",children:t})]})};(0,t.useEffect)(()=>{s&&(async()=>{try{if(!d.db)throw Error("Firebase 未初始化");let e=(0,i.collection)(d.db,"suppliers"),s=(await (0,i.getDocs)(e)).docs.map(e=>({id:e.id,name:e.data().name}));V(s);try{let e=(0,i.collection)(d.db,"materialCategories"),s=(await (0,i.getDocs)(e)).docs.map(e=>e.data().name).filter(Boolean);B(s.sort())}catch(e){console.log("主分類集合不存在，使用空陣列"),B([])}try{let e=(0,i.collection)(d.db,"materialSubCategories"),s=(await (0,i.getDocs)(e)).docs.map(e=>e.data().name).filter(Boolean);L(s.sort())}catch(e){console.log("細分分類集合不存在，使用空陣列"),L([])}}catch(e){console.error("Failed to fetch data:",e),x.Am.error("讀取資料失敗。")}})()},[s]),(0,t.useEffect)(()=>{if(s&&I){var e;let s={name:I.name||"",category:I.category||"",subCategory:I.subCategory||"",supplierId:(null===(e=I.supplierRef)||void 0===e?void 0:e.id)||"none",currentStock:I.currentStock||0,safetyStockLevel:I.safetyStockLevel||0,costPerUnit:I.costPerUnit||0,unit:I.unit||"",notes:I.notes||""};X.reset(s),Q(I.code||"")}else s&&!I&&(X.reset(),Q(""))},[s,I,X]);let D=async e=>{k(!0);let s=x.Am.loading(P?"正在更新物料...":"正在新增物料...");try{let r=(0,o.$C)();if(P&&I){console.log("正在更新物料，資料:",{materialId:I.id,...e,supplierId:"none"===e.supplierId?void 0:e.supplierId});let l=(0,o.V1)(r,"updateMaterial"),t=await l({materialId:I.id,...e,supplierId:"none"===e.supplierId?void 0:e.supplierId});console.log("更新物料結果:",t),x.Am.success("物料 ".concat(e.name," 已成功更新。"),{id:s})}else{console.log("正在新增物料，資料:",{...e,supplierId:"none"===e.supplierId?void 0:e.supplierId});let l=(0,o.V1)(r,"createMaterial"),t=await l({...e,supplierId:"none"===e.supplierId?void 0:e.supplierId});console.log("新增物料結果:",t),x.Am.success("物料 ".concat(e.name," 已成功建立。"),{id:s})}h(),n(!1)}catch(r){console.error("Error submitting material form:",r);let e=P?"更新物料時發生錯誤。":"新增物料時發生錯誤。";r instanceof Error&&(e=r.message),x.Am.error(e,{id:s})}finally{k(!1)}};return(0,l.jsx)(p.Vq,{open:s,onOpenChange:n,children:(0,l.jsxs)(p.cZ,{className:"max-w-4xl max-h-[90vh] overflow-y-auto bg-white",children:[(0,l.jsxs)(p.fK,{className:"pb-4 border-b border-gray-200",children:[(0,l.jsxs)(p.$N,{className:"flex items-center gap-3 text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:[(0,l.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:(0,l.jsx)(b.Z,{className:"h-5 w-5 text-white"})}),P?"編輯物料":"新增物料"]}),(0,l.jsx)(p.Be,{className:"text-gray-600 mt-2",children:P?"修改物料詳細資訊":"建立新的物料資料"})]}),(0,l.jsx)(j.l0,{...X,children:(0,l.jsxs)("form",{onSubmit:X.handleSubmit(D),className:"space-y-6",children:[(0,l.jsxs)("div",{className:"space-y-6 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200 shadow-sm",children:[(0,l.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-3 text-blue-800",children:[(0,l.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,l.jsx)(y.Z,{className:"h-4 w-4 text-blue-600"})}),"基本資料"]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsx)(j.Wi,{control:X.control,name:"name",render:e=>{let{field:s}=e;return(0,l.jsxs)(j.xJ,{children:[(0,l.jsx)(j.lX,{className:"text-sm font-semibold text-gray-700",children:"物料名稱 *"}),(0,l.jsx)(j.NI,{children:(0,l.jsx)(g.I,{placeholder:"例如：高級香精 A",className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500",...s})}),(0,l.jsx)(j.zG,{})]})}}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"w-12 h-12 bg-muted rounded-lg flex items-center justify-center",children:(0,l.jsx)(m,{category:A||"default",size:"lg"})}),(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)(j.Wi,{control:X.control,name:"category",render:e=>{let{field:s}=e;return(0,l.jsxs)(j.xJ,{children:[(0,l.jsx)(j.lX,{className:"text-sm font-semibold text-foreground",children:"主分類 *"}),(0,l.jsxs)(v.Ph,{onValueChange:s.onChange,value:s.value,children:[(0,l.jsx)(j.NI,{children:(0,l.jsx)(v.i4,{className:"border-input focus:border-primary focus:ring-primary",children:(0,l.jsx)(v.ki,{placeholder:"選擇主分類"})})}),(0,l.jsx)(v.Bw,{children:S.map(e=>(0,l.jsx)(v.Ql,{value:e,children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(m,{category:e,size:"sm"}),(0,l.jsx)("span",{children:e})]})},e))})]}),(0,l.jsx)(j.zG,{})]})}})})]}),(0,l.jsx)(j.Wi,{control:X.control,name:"subCategory",render:e=>{let{field:s}=e;return(0,l.jsxs)(j.xJ,{children:[(0,l.jsx)(j.lX,{className:"text-sm font-semibold text-foreground",children:"細分分類 *"}),(0,l.jsxs)(v.Ph,{onValueChange:s.onChange,value:s.value,children:[(0,l.jsx)(j.NI,{children:(0,l.jsx)(v.i4,{className:"border-input focus:border-primary focus:ring-primary",children:(0,l.jsx)(v.ki,{placeholder:"選擇細分分類"})})}),(0,l.jsx)(v.Bw,{children:Z.map(e=>(0,l.jsx)(v.Ql,{value:e,children:e},e))})]}),(0,l.jsx)(j.zG,{})]})}}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(N,{className:"h-4 w-4 text-muted-foreground"}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("label",{className:"text-sm font-semibold text-foreground",children:"物料代號"}),(0,l.jsxs)("div",{className:"mt-1 p-3 bg-muted border border-border rounded-md",children:[P?(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm font-mono mb-1",children:null==I?void 0:I.code}),W((null==I?void 0:I.code)||"")]}):(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm font-mono mb-1",children:E||"等待選擇分類..."}),W(E)]}),(0,l.jsxs)("div",{className:"text-xs text-muted-foreground mt-2",children:[(0,l.jsx)("div",{children:"格式：主分類ID(2位字母) + 細分分類ID(3位數字) + 隨機碼(4位數字)"}),(0,l.jsx)("div",{children:"例如：AB1234567"})]})]})]})]})]})]}),(0,l.jsxs)("div",{className:"space-y-6 p-6 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-200 shadow-sm",children:[(0,l.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-3 text-green-800",children:[(0,l.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:(0,l.jsx)(w.Z,{className:"h-4 w-4 text-green-600"})}),"供應商資訊"]}),(0,l.jsx)(j.Wi,{control:X.control,name:"supplierId",render:e=>{let{field:s}=e;return(0,l.jsxs)(j.xJ,{children:[(0,l.jsx)(j.lX,{className:"text-sm font-semibold text-foreground",children:"供應商"}),(0,l.jsxs)(v.Ph,{onValueChange:s.onChange,value:s.value,children:[(0,l.jsx)(j.NI,{children:(0,l.jsx)(v.i4,{className:"border-input focus:border-success focus:ring-success",children:(0,l.jsx)(v.ki,{placeholder:"選擇供應商"})})}),(0,l.jsxs)(v.Bw,{children:[(0,l.jsx)(v.Ql,{value:"none",children:"無供應商"}),H.map(e=>(0,l.jsx)(v.Ql,{value:e.id,children:e.name},e.id))]})]}),(0,l.jsx)(j.zG,{})]})}})]}),(0,l.jsxs)("div",{className:"space-y-6 p-6 bg-gradient-to-r from-purple-50 to-violet-50 rounded-xl border border-purple-200 shadow-sm",children:[(0,l.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-3 text-purple-800",children:[(0,l.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,l.jsx)(z.Z,{className:"h-4 w-4 text-purple-600"})}),"庫存與成本"]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,l.jsx)(j.Wi,{control:X.control,name:"currentStock",render:e=>{let{field:s}=e;return(0,l.jsxs)(j.xJ,{children:[(0,l.jsx)(j.lX,{className:"text-sm font-semibold text-gray-700",children:"現有庫存"}),(0,l.jsx)(j.NI,{children:(0,l.jsx)(g.I,{type:"number",step:"0.01",placeholder:"0",className:"border-gray-300 focus:border-purple-500 focus:ring-purple-500",...s})}),(0,l.jsx)(j.zG,{})]})}}),(0,l.jsx)(j.Wi,{control:X.control,name:"safetyStockLevel",render:e=>{let{field:s}=e;return(0,l.jsxs)(j.xJ,{children:[(0,l.jsx)(j.lX,{className:"text-sm font-semibold text-gray-700",children:"安全庫存"}),(0,l.jsx)(j.NI,{children:(0,l.jsx)(g.I,{type:"number",placeholder:"0",className:"border-gray-300 focus:border-purple-500 focus:ring-purple-500",...s})}),(0,l.jsx)(j.zG,{})]})}}),(0,l.jsx)(j.Wi,{control:X.control,name:"costPerUnit",render:e=>{let{field:s}=e;return(0,l.jsxs)(j.xJ,{children:[(0,l.jsx)(j.lX,{className:"text-sm font-semibold text-gray-700",children:"單位成本"}),(0,l.jsx)(j.NI,{children:(0,l.jsx)(g.I,{type:"number",step:"0.01",placeholder:"0.00",className:"border-gray-300 focus:border-purple-500 focus:ring-purple-500",...s})}),(0,l.jsx)(j.zG,{})]})}}),(0,l.jsx)(j.Wi,{control:X.control,name:"unit",render:e=>{let{field:s}=e;return(0,l.jsxs)(j.xJ,{children:[(0,l.jsx)(j.lX,{className:"text-sm font-semibold text-gray-700",children:"單位"}),(0,l.jsxs)(v.Ph,{onValueChange:s.onChange,value:s.value||"個",children:[(0,l.jsx)(j.NI,{children:(0,l.jsx)(v.i4,{className:"border-gray-300 focus:border-purple-500 focus:ring-purple-500",children:(0,l.jsx)(v.ki,{placeholder:"選擇單位"})})}),(0,l.jsxs)(v.Bw,{children:[(0,l.jsx)(v.Ql,{value:"個",children:"個"}),(0,l.jsx)(v.Ql,{value:"KG",children:"KG"}),(0,l.jsx)(v.Ql,{value:"張",children:"張"})]})]}),(0,l.jsx)(j.zG,{})]})}})]})]}),(0,l.jsxs)("div",{className:"space-y-6 p-6 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl border border-yellow-200 shadow-sm",children:[(0,l.jsxs)("h3",{className:"text-xl font-bold flex items-center gap-3 text-yellow-800",children:[(0,l.jsx)("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center",children:(0,l.jsx)(b.Z,{className:"h-4 w-4 text-yellow-600"})}),"備註資訊"]}),(0,l.jsx)(j.Wi,{control:X.control,name:"notes",render:e=>{let{field:s}=e;return(0,l.jsxs)(j.xJ,{children:[(0,l.jsx)(j.lX,{className:"text-sm font-semibold text-gray-700",children:"備註"}),(0,l.jsx)(j.NI,{children:(0,l.jsx)(f.g,{placeholder:"請輸入物料相關的備註資訊...",className:"min-h-[100px] resize-none border-gray-300 focus:border-yellow-500 focus:ring-yellow-500",...s})}),(0,l.jsx)(j.zG,{})]})}})]}),(0,l.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200",children:[(0,l.jsx)(u.z,{type:"button",variant:"outline",onClick:()=>n(!1),className:"px-6 py-2 border-gray-300 text-gray-700 hover:bg-gray-50",children:"取消"}),(0,l.jsx)(u.z,{type:"submit",disabled:M,className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white shadow-lg hover:shadow-xl transition-all duration-200",children:M?(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"處理中..."]}):P?"更新物料":"新增物料"})]})]})})]})})}}}]);