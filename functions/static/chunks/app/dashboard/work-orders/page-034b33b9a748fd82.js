(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5817],{72633:function(e,t,r){Promise.resolve().then(r.bind(r,58460))},79205:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var s=r(2265);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:d="",children:c,iconNode:m,...u}=e;return(0,s.createElement)("svg",{ref:t,...n,width:a,height:a,stroke:r,strokeWidth:i?24*Number(o)/Number(a):o,className:l("lucide",d),...u},[...m.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),i=(e,t)=>{let r=(0,s.forwardRef)((r,n)=>{let{className:i,...d}=r;return(0,s.createElement)(o,{ref:n,iconNode:t,className:l("lucide-".concat(a(e)),i),...d})});return r.displayName="".concat(e),r}},49322:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(79205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},41671:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(79205).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},91723:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(79205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},39989:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(79205).Z)("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]])},73247:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(79205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},99376:function(e,t,r){"use strict";var s=r(35475);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},58460:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return D}});var s=r(57437),a=r(2265),l=r(99376),n=r(5978),o=r(46410),i=r(14438),d=r(47903),c=r(71594),m=r(24525),u=r(33804),x=r(12381),h=r(43044),g=r(42208),b=r(92451),f=r(10407);function p(e){var t,r;let{columns:n,data:o}=e,i=(0,l.useRouter)(),[d,p]=(0,a.useState)([{id:"createdAt",desc:!0}]),[v,j]=(0,a.useState)([]),N=(0,c.b7)({data:o,columns:n,getCoreRowModel:(0,m.sC)(),getPaginationRowModel:(0,m.G_)(),onSortingChange:p,getSortedRowModel:(0,m.tj)(),onColumnFiltersChange:j,getFilteredRowModel:(0,m.vL)(),state:{sorting:d,columnFilters:v}});return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"hidden lg:block",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[(0,s.jsx)("div",{className:"px-6 py-4 bg-gradient-to-r from-pink-100 to-purple-100 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-pink-400 to-purple-500 rounded-lg flex items-center justify-center",children:(0,s.jsx)(h.Z,{className:"h-4 w-4 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"工單清單"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"詳細的工單資訊與狀態"})]})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-700 bg-white/80 px-3 py-1 rounded-full border border-gray-200",children:["共 ",N.getFilteredRowModel().rows.length," 個工單"]})]})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(u.iA,{className:"table-modern",children:[(0,s.jsx)(u.xD,{children:N.getHeaderGroups().map(e=>(0,s.jsx)(u.SC,{className:"bg-gradient-to-r from-gray-50 to-gray-100 hover:bg-gray-50/80",children:e.headers.map(e=>(0,s.jsx)(u.ss,{className:"font-semibold text-gray-700 py-4 px-6",children:e.isPlaceholder?null:(0,c.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(u.RM,{children:(null===(t=N.getRowModel().rows)||void 0===t?void 0:t.length)?N.getRowModel().rows.map((e,t)=>(0,s.jsx)(u.SC,{"data-state":e.getIsSelected()&&"selected",onClick:()=>i.push("/dashboard/work-orders/".concat(e.original.id)),className:"cursor-pointer hover:bg-gray-50/50 transition-all duration-200 border-b border-gray-100 group",children:e.getVisibleCells().map(e=>(0,s.jsx)(u.pj,{className:"py-4 px-6",children:(0,c.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,s.jsx)(u.SC,{children:(0,s.jsx)(u.pj,{colSpan:n.length,className:"h-64 text-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-slate-100 to-blue-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(h.Z,{className:"h-10 w-10 text-slate-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-slate-800 mb-2",children:"沒有工單資料"}),(0,s.jsx)("p",{className:"text-slate-600 mb-4",children:"開始建立第一個工單來管理生產流程"}),(0,s.jsx)(x.z,{onClick:()=>i.push("/dashboard/work-orders/create"),className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white",children:"建立新工單"})]})]})})})})]})})]})}),(0,s.jsx)("div",{className:"lg:hidden",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[(0,s.jsx)("div",{className:"px-4 py-3 bg-gradient-to-r from-pink-100 to-purple-100 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-6 h-6 bg-gradient-to-br from-pink-400 to-purple-500 rounded-lg flex items-center justify-center",children:(0,s.jsx)(h.Z,{className:"h-3 w-3 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-base font-semibold text-gray-800",children:"工單清單"}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"手機版檢視"})]})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-700 bg-white/80 px-2 py-1 rounded-full border border-gray-200",children:[N.getFilteredRowModel().rows.length," 個"]})]})}),(0,s.jsx)("div",{className:"p-4",children:(null===(r=N.getRowModel().rows)||void 0===r?void 0:r.length)?(0,s.jsx)("div",{className:"space-y-3",children:N.getRowModel().rows.map(e=>{let t=e.original;return(0,s.jsxs)("div",{onClick:()=>i.push("/dashboard/work-orders/".concat(t.id)),className:"bg-white border border-gray-200 rounded-xl p-4 cursor-pointer hover:bg-gray-50/50 transition-all duration-200 shadow-sm hover:shadow-md group",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-pink-400 to-purple-500 rounded-lg flex items-center justify-center",children:(0,s.jsx)(h.Z,{className:"h-4 w-4 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-semibold text-slate-800 text-sm",children:t.code}),(0,s.jsxs)("div",{className:"text-xs text-slate-500",children:["建立於 ",t.createdAt]})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(x.z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:e=>{e.stopPropagation(),i.push("/dashboard/work-orders/".concat(t.id))},children:(0,s.jsx)(g.Z,{className:"h-4 w-4"})})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"產品"}),(0,s.jsx)("div",{className:"font-medium text-slate-800 truncate",children:t.productName})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"目標數量"}),(0,s.jsxs)("div",{className:"font-semibold text-blue-600",children:[t.targetQuantity," g"]})]}),(0,s.jsxs)("div",{className:"col-span-2 space-y-1",children:[(0,s.jsx)("div",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide",children:"狀態"}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ".concat("預報"===t.status?"bg-orange-100 text-orange-800 border border-orange-200":"進行"===t.status?"bg-blue-100 text-blue-800 border border-blue-200":"完工"===t.status?"bg-green-100 text-green-800 border border-green-200":"入庫"===t.status?"bg-purple-100 text-purple-800 border border-purple-200":"bg-slate-100 text-slate-800 border border-slate-200"),children:t.status})})]})]})]},e.id)})}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-slate-100 to-blue-100 rounded-full flex items-center justify-center mb-4",children:(0,s.jsx)(h.Z,{className:"h-8 w-8 text-slate-400"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"沒有工單資料"}),(0,s.jsx)("p",{className:"text-sm text-slate-600 text-center mb-4",children:"開始建立第一個工單來管理生產流程"}),(0,s.jsx)(x.z,{onClick:()=>i.push("/dashboard/work-orders/create"),className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white",children:"建立新工單"})]})})]})}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 py-6",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-700 bg-gray-50 px-4 py-2 rounded-lg border border-gray-200",children:["顯示第 ",N.getState().pagination.pageIndex*N.getState().pagination.pageSize+1," 到"," ",Math.min((N.getState().pagination.pageIndex+1)*N.getState().pagination.pageSize,N.getFilteredRowModel().rows.length)," ","筆，共 ",N.getFilteredRowModel().rows.length," 筆資料"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(x.z,{variant:"outline",size:"sm",onClick:()=>N.previousPage(),disabled:!N.getCanPreviousPage(),className:"border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400 transition-all duration-200",children:[(0,s.jsx)(b.Z,{className:"h-4 w-4 mr-1"}),"上一頁"]}),(0,s.jsxs)(x.z,{variant:"outline",size:"sm",onClick:()=>N.nextPage(),disabled:!N.getCanNextPage(),className:"border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400 transition-all duration-200",children:["下一頁",(0,s.jsx)(f.Z,{className:"h-4 w-4 ml-1"})]})]})]})]})}var v=r(28842),j=r(69174);let N=e=>{let{status:t}=e,r=(e=>{switch(e){case"預報":return{className:"bg-gradient-to-r from-orange-200 to-orange-300 text-orange-800 border border-orange-200 shadow-sm",icon:"⏳"};case"進行":return{className:"bg-gradient-to-r from-green-200 to-green-300 text-green-800 border border-green-200 shadow-sm",icon:"\uD83D\uDD04"};case"完工":return{className:"bg-gradient-to-r from-emerald-200 to-emerald-300 text-emerald-800 border border-emerald-200 shadow-sm",icon:"✅"};case"入庫":return{className:"bg-gradient-to-r from-purple-200 to-purple-300 text-purple-800 border border-purple-200 shadow-sm",icon:"\uD83D\uDCE6"};default:return{className:"bg-gradient-to-r from-gray-200 to-gray-300 text-gray-800 border border-gray-200 shadow-sm",icon:"❓"}}})(t);return(0,s.jsxs)(j.C,{className:"".concat(r.className," font-semibold px-3 py-1.5 rounded-full text-sm transition-all duration-200 hover:scale-105"),children:[(0,s.jsx)("span",{className:"mr-1.5",children:r.icon}),t]})},y=[{accessorKey:"code",header:e=>{let{column:t}=e;return(0,s.jsxs)(x.z,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),className:"font-semibold text-gray-700 hover:text-gray-900 hover:bg-gray-50 transition-all duration-200",children:["工單號碼",(0,s.jsx)(v.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return(0,s.jsx)("div",{className:"font-mono font-semibold text-gray-700 bg-gray-50 px-3 py-1.5 rounded-lg border border-gray-200",children:t.getValue("code")})}},{accessorKey:"seriesName",header:()=>(0,s.jsx)("div",{className:"font-semibold text-gray-700",children:"產品系列"}),cell:e=>{let{row:t}=e;return(0,s.jsx)("div",{className:"text-blue-600 font-semibold",children:t.getValue("seriesName")})}},{accessorKey:"productName",header:()=>(0,s.jsx)("div",{className:"font-semibold text-gray-700",children:"產品名稱"}),cell:e=>{let{row:t}=e;return(0,s.jsx)("div",{className:"text-gray-800 max-w-xs truncate",title:t.getValue("productName"),children:t.getValue("productName")})}},{accessorKey:"targetQuantity",header:()=>(0,s.jsx)("div",{className:"text-right font-semibold text-gray-700",children:"目標產量"}),cell:e=>{let{row:t}=e,r=parseFloat(t.getValue("targetQuantity"));return(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"font-bold text-gray-700 text-lg",children:r}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"公斤 (KG)"})]})}},{accessorKey:"status",header:()=>(0,s.jsx)("div",{className:"font-semibold text-gray-700",children:"狀態"}),cell:e=>{let{row:t}=e;return(0,s.jsx)(N,{status:t.getValue("status")})}},{accessorKey:"createdAt",header:e=>{let{column:t}=e;return(0,s.jsxs)(x.z,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),className:"font-semibold text-gray-700 hover:text-gray-900 hover:bg-gray-50 transition-all duration-200",children:["建立日期",(0,s.jsx)(v.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return(0,s.jsx)("div",{className:"text-gray-600",children:t.getValue("createdAt")})}}];var w=r(79820),k=r(99397),C=r(39989),Z=r(49322),S=r(91723),z=r(41671),M=r(44794),P=r(90740),R=r(73247);function A(){let e=(0,l.useRouter)(),[t,r]=(0,a.useState)([]),[c,m]=(0,a.useState)([]),[u,h]=(0,a.useState)(!0),[g,b]=(0,a.useState)(!1),[f,v]=(0,a.useState)(!0),[j,N]=(0,a.useState)(null),[A,D]=(0,a.useState)("all"),V=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?(h(!0),r([]),N(null),v(!0)):b(!0);try{if(!o.db)throw Error("Firebase 未初始化");let t=(0,n.query)((0,n.collection)(o.db,"workOrders"),(0,n.Xo)("createdAt","desc"),(0,n.b9)(20));!e&&j&&(t=(0,n.query)((0,n.collection)(o.db,"workOrders"),(0,n.Xo)("createdAt","desc"),(0,n.TQ)(j),(0,n.b9)(20)));let s=await (0,n.getDocs)(t),a=s.docs.map(e=>{var t,r,s,a,l;let n=e.data();return{id:e.id,code:n.code||"",productName:(null===(t=n.productSnapshot)||void 0===t?void 0:t.name)||"未知產品",seriesName:(null===(r=n.productSnapshot)||void 0===r?void 0:r.seriesName)||"未指定",targetQuantity:n.targetQuantity||0,status:n.status||"預報",createdAt:(null===(l=n.createdAt)||void 0===l?void 0:null===(a=l.toDate)||void 0===a?void 0:null===(s=a.call(l))||void 0===s?void 0:s.toLocaleDateString())||"未知日期"}});e?r(a):r(e=>[...e,...a]);let l=s.docs[s.docs.length-1];N(l||null),v(20===s.docs.length)}catch(e){(0,d.vU)("讀取工單資料失敗",e),i.Am.error("讀取工單資料失敗")}finally{h(!1),b(!1)}},[j]);(0,a.useEffect)(()=>{let e=t;"all"!==A&&(e=e.filter(e=>e.status===A)),m(e)},[t,A]),(0,a.useEffect)(()=>{V(!0)},[]);let E=(0,a.useMemo)(()=>{let e=t.length,r=t.filter(e=>"預報"===e.status).length;return{total:e,forecast:r,inProgress:t.filter(e=>"進行"===e.status).length,completed:t.filter(e=>"完工"===e.status).length,warehoused:t.filter(e=>"入庫"===e.status).length}},[t]);return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:(0,s.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 bg-clip-text text-transparent",children:"工單管理中心"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2 text-lg font-medium",children:"專業的生產工單管理與進度追蹤系統"})]}),(0,s.jsxs)(x.z,{onClick:()=>{e.push("/dashboard/work-orders/create")},className:"bg-gradient-to-r from-pink-400 to-purple-500 hover:from-pink-500 hover:to-purple-600 text-white shadow-lg hover:shadow-xl transition-all duration-300 h-12 px-6 text-base font-semibold",children:[(0,s.jsx)(k.Z,{className:"mr-2 h-5 w-5"}),"建立新工單"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4 mb-8",children:[(0,s.jsx)(w.Zb,{className:"bg-gradient-to-br from-blue-200 to-blue-300 border-0 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:(0,s.jsx)(w.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-blue-700",children:"總工單數"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-800",children:E.total})]}),(0,s.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)(C.Z,{className:"h-5 w-5 text-blue-600"})})]})})}),(0,s.jsx)(w.Zb,{className:"bg-gradient-to-br from-orange-200 to-orange-300 border-0 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:(0,s.jsx)(w.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-orange-700",children:"預報中"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-orange-800",children:E.forecast})]}),(0,s.jsx)("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)(Z.Z,{className:"h-5 w-5 text-orange-600"})})]})})}),(0,s.jsx)(w.Zb,{className:"bg-gradient-to-br from-green-200 to-green-300 border-0 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:(0,s.jsx)(w.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-green-700",children:"進行中"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-green-800",children:E.inProgress})]}),(0,s.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)(S.Z,{className:"h-5 w-5 text-green-600"})})]})})}),(0,s.jsx)(w.Zb,{className:"bg-gradient-to-br from-emerald-200 to-emerald-300 border-0 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:(0,s.jsx)(w.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-emerald-700",children:"已完工"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-emerald-800",children:E.completed})]}),(0,s.jsx)("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)(z.Z,{className:"h-5 w-5 text-emerald-600"})})]})})}),(0,s.jsx)(w.Zb,{className:"bg-gradient-to-br from-purple-200 to-purple-300 border-0 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 col-span-2 lg:col-span-1",children:(0,s.jsx)(w.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-purple-700",children:"已入庫"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-purple-800",children:E.warehoused})]}),(0,s.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)(M.Z,{className:"h-5 w-5 text-purple-600"})})]})})})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(P.Z,{className:"h-4 w-4 text-gray-500"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"狀態篩選："})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsxs)(x.z,{variant:"all"===A?"default":"outline",size:"sm",onClick:()=>D("all"),className:"font-medium transition-all duration-200 ".concat("all"===A?"bg-gradient-to-r from-blue-400 to-purple-500 hover:from-blue-500 hover:to-purple-600 text-white shadow-lg":"border-blue-200 text-blue-600 hover:bg-blue-50 hover:border-blue-300 bg-white"),children:["全部 (",E.total,")"]}),(0,s.jsxs)(x.z,{variant:"預報"===A?"default":"outline",size:"sm",onClick:()=>D("預報"),className:"font-medium transition-all duration-200 ".concat("預報"===A?"bg-gradient-to-r from-orange-400 to-red-400 hover:from-orange-500 hover:to-red-500 text-white shadow-lg":"border-orange-200 text-orange-600 hover:bg-orange-50 hover:border-orange-300 bg-white"),children:["預報 (",E.forecast,")"]}),(0,s.jsxs)(x.z,{variant:"進行"===A?"default":"outline",size:"sm",onClick:()=>D("進行"),className:"font-medium transition-all duration-200 ".concat("進行"===A?"bg-gradient-to-r from-green-400 to-emerald-500 hover:from-green-500 hover:to-emerald-600 text-white shadow-lg":"border-green-200 text-green-600 hover:bg-green-50 hover:border-green-300 bg-white"),children:["進行 (",E.inProgress,")"]}),(0,s.jsxs)(x.z,{variant:"完工"===A?"default":"outline",size:"sm",onClick:()=>D("完工"),className:"font-medium transition-all duration-200 ".concat("完工"===A?"bg-gradient-to-r from-emerald-400 to-teal-500 hover:from-emerald-500 hover:to-teal-600 text-white shadow-lg":"border-emerald-200 text-emerald-600 hover:bg-emerald-50 hover:border-emerald-300 bg-white"),children:["完工 (",E.completed,")"]}),(0,s.jsxs)(x.z,{variant:"入庫"===A?"default":"outline",size:"sm",onClick:()=>D("入庫"),className:"font-medium transition-all duration-200 ".concat("入庫"===A?"bg-gradient-to-r from-purple-400 to-pink-500 hover:from-purple-500 hover:to-pink-600 text-white shadow-lg":"border-purple-200 text-purple-600 hover:bg-purple-50 hover:border-purple-300 bg-white"),children:["入庫 (",E.warehoused,")"]})]})]}),"all"!==A&&(0,s.jsx)("div",{className:"bg-gradient-to-r from-pink-50 to-purple-50 border border-pink-200 rounded-lg p-3 mb-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(R.Z,{className:"h-4 w-4 text-pink-500"}),(0,s.jsxs)("span",{className:"text-sm text-pink-700 font-medium",children:["顯示 ",A," 狀態的工單，共 ",c.length," 個"]})]})})]}),u?(0,s.jsx)("div",{className:"flex items-center justify-center py-16",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-16 h-16 border-4 border-gray-200 rounded-full animate-spin"}),(0,s.jsx)("div",{className:"absolute top-0 left-0 w-16 h-16 border-4 border-transparent border-t-blue-500 rounded-full animate-spin"})]}),(0,s.jsx)("span",{className:"mt-6 text-gray-600 font-medium text-lg",children:"載入工單資料中..."}),(0,s.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"請稍候，正在從資料庫讀取資料"})]})}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"overflow-hidden rounded-xl border border-gray-200",children:(0,s.jsx)(p,{columns:y,data:c})}),f&&(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(x.z,{onClick:()=>{!g&&f&&V(!1)},disabled:g,variant:"outline",className:"px-8 py-2",children:g?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"載入中..."]}):"載入更多工單"})}),!f&&t.length>20&&(0,s.jsxs)("div",{className:"text-center text-gray-500 py-4",children:["已載入所有 ",t.length," 筆工單"]})]})]})})}function D(){return(0,s.jsx)(A,{})}},69174:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var s=r(57437);r(2265);var a=r(37053),l=r(90535),n=r(93448);let o=(0,l.j)("inline-flex items-center justify-center rounded-full px-2 py-1 text-xs font-medium focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"bg-blue-100 text-blue-700",secondary:"bg-muted text-muted-foreground",destructive:"bg-red-100 text-red-700",outline:"text-foreground border border-border",success:"bg-green-100 text-green-700",warning:"bg-yellow-100 text-yellow-700",purple:"bg-purple-100 text-purple-700"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,asChild:l=!1,...i}=e,d=l?a.g7:"span";return(0,s.jsx)(d,{"data-slot":"badge",className:(0,n.cn)(o({variant:r}),t),...i})}},79820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return n},SZ:function(){return i},Zb:function(){return l},aY:function(){return d},eW:function(){return c},ll:function(){return o}});var s=r(57437);r(2265);var a=r(93448);function l(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-lg border-2 p-6 shadow-md",t),...r})}function n(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 has-data-[slot=card-action]:grid-cols-[1fr_auto]",t),...r})}function o(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...r})}function i(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",t),...r})}function d(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("",t),...r})}function c(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center",t),...r})}},33804:function(e,t,r){"use strict";r.d(t,{RM:function(){return o},SC:function(){return i},iA:function(){return l},pj:function(){return c},ss:function(){return d},xD:function(){return n}});var s=r(57437);r(2265);var a=r(93448);function l(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",t),...r})})}function n(e){let{className:t,...r}=e;return(0,s.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("",t),...r})}function o(e){let{className:t,...r}=e;return(0,s.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",t),...r})}function i(e){let{className:t,...r}=e;return(0,s.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b border-border transition-colors",t),...r})}function d(e){let{className:t,...r}=e;return(0,s.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("bg-muted text-foreground font-semibold border-b border-border p-3 text-left align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})}function c(e){let{className:t,...r}=e;return(0,s.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-3 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})}}},function(e){e.O(0,[3609,9015,3676,5569,4438,3003,2365,2971,2117,1744],function(){return e(e.s=72633)}),_N_E=e.O()}]);