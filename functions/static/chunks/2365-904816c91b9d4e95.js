"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2365],{12381:function(e,r,n){n.d(r,{d:function(){return c},z:function(){return s}});var t=n(57437),o=n(2265),a=n(37053),i=n(90535),u=n(93448);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 text-base sm:text-sm",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 border border-border",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-11 sm:h-10 px-4 py-2 min-h-[44px]",sm:"h-10 sm:h-9 rounded-md px-3 min-h-[40px]",lg:"h-12 sm:h-11 rounded-md px-8 min-h-[48px]",icon:"h-11 w-11 sm:h-10 sm:w-10 min-h-[44px] min-w-[44px]"}},defaultVariants:{variant:"default",size:"default"}}),s=o.forwardRef((e,r)=>{let{className:n,variant:o,size:i,asChild:s=!1,...l}=e,d=s?a.g7:"button";return(0,t.jsx)(d,{className:(0,u.cn)(c({variant:o,size:i,className:n})),ref:r,...l})});s.displayName="Button"},46410:function(e,r,n){n.d(r,{E7:function(){return m},KT:function(){return w},T:function(){return p},db:function(){return v}});var t=n(738),o=n(82148),a=n(5978),i=n(1850),u=n(96485),c=n(47903);(0,c.wC)("Firebase 模組載入...");let s=null,l=null,d=null,f=null,b=null,g=!1;function h(){return g?{app:s,auth:l,db:d,functions:f,storage:b}:function(){if(g)return(0,c.wC)("Firebase 已經初始化"),{app:s,auth:l,db:d,functions:f,storage:b};try{(0,c.wC)("開始初始化 Firebase...");let e=function(){let e={apiKey:"AIzaSyCMIAqNPsIyl3fJNllqNCuUJE2Rvcdf6fk",authDomain:"deer-lab.firebaseapp.com",projectId:"deer-lab",storageBucket:"deer-lab.firebasestorage.app",messagingSenderId:"554942047858",appId:"1:554942047858:web:607d3e27bb438c898644eb"};return(0,c.wC)("Firebase 配置檢查:"),(0,c.wC)("  API Key: ".concat(e.apiKey?"✅ 已設置":"❌ 未設置")),(0,c.wC)("  Auth Domain: ".concat(e.authDomain?"✅ 已設置":"❌ 未設置")),(0,c.wC)("  Project ID: ".concat(e.projectId?"✅ 已設置":"❌ 未設置")),(0,c.wC)("  Storage Bucket: ".concat(e.storageBucket?"✅ 已設置":"❌ 未設置")),(0,c.wC)("  Messaging Sender ID: ".concat(e.messagingSenderId?"✅ 已設置":"❌ 未設置")),(0,c.wC)("  App ID: ".concat(e.appId?"✅ 已設置":"❌ 未設置")),e}();if(!e.apiKey)throw Error("Missing NEXT_PUBLIC_FIREBASE_API_KEY environment variable");if(!e.authDomain)throw Error("Missing NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN environment variable");if(!e.projectId)throw Error("Missing NEXT_PUBLIC_FIREBASE_PROJECT_ID environment variable");return(0,c.wC)("正在初始化 Firebase App..."),s=(0,t.ZF)(e),(0,c.wC)("Firebase App 初始化成功"),(0,c.wC)("正在初始化 Firebase Auth..."),l=(0,o.v0)(s),(0,c.wC)("Firebase Auth 初始化成功"),(0,c.wC)("正在初始化 Firestore..."),d=(0,a.ad)(s),(0,c.wC)("Firestore 初始化成功"),(0,c.wC)("正在初始化 Firebase Functions..."),f=(0,i.$C)(s),(0,c.wC)("Firebase Functions 初始化成功"),(0,c.wC)("正在初始化 Firebase Storage..."),b=(0,u.getStorage)(s),(0,c.wC)("Firebase Storage 初始化成功"),g=!0,(0,c.wC)("Firebase 所有服務初始化完成！"),{app:s,auth:l,db:d,functions:f,storage:b}}catch(e){return console.error("❌ Firebase 初始化失敗:",e),{app:null,auth:null,db:null,functions:null,storage:null}}}()}function m(){return h().auth}function p(){return h().db}function w(){return h().storage}m();let v=p();h().functions,w()},93448:function(e,r,n){n.d(r,{NQ:function(){return d},SF:function(){return l},cn:function(){return a},generateCategoryId:function(){return i},generateSubCategoryId:function(){return u},generateUniqueMaterialCode:function(){return b}});var t=n(61994),o=n(53335);function a(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return(0,o.m6)((0,t.W)(r))}function i(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",r="";for(let n=0;n<2;n++)r+=e.charAt(Math.floor(Math.random()*e.length));return r}function u(){let e="";for(let r=0;r<3;r++)e+=Math.floor(10*Math.random());return e}function c(e,r,n){let t=e?e.substring(0,2).toUpperCase():"XX",o=r?r.padStart(3,"0").substring(0,3):"000",a=n||function(){let e="";for(let r=0;r<4;r++)e+=Math.floor(10*Math.random());return e}();return"".concat(t).concat(o).concat(a)}async function s(e,r,t){try{let{collection:o,getDocs:a,query:i,where:u}=await Promise.resolve().then(n.bind(n,5978)),c=i(o(t,r),u("id","==",e));return!(await a(c)).empty}catch(e){return console.error("檢查 ID 是否存在時發生錯誤:",e),!1}}async function l(e){let r=i(),n=0;for(;await s(r,"materialCategories",e)&&n<10;)r=i(),n++;return r}async function d(e){let r=u(),n=0;for(;await s(r,"materialSubCategories",e)&&n<10;)r=u(),n++;return r}async function f(e,r){try{let{collection:t,getDocs:o,query:a,where:i}=await Promise.resolve().then(n.bind(n,5978)),u=a(t(r,"materials"),i("code","==",e));return!(await o(u)).empty}catch(e){return console.error("檢查物料代號是否存在時發生錯誤:",e),!1}}async function b(e,r,n){let t=c(e,r),o=0;for(;await f(t,n)&&o<10;)t=c(e,r),o++;return t}n(5978)},47903:function(e,r,n){n.d(r,{ZK:function(){return a},fF:function(){return u},kg:function(){return o},vU:function(){return i},wC:function(){return c}});class t{getColorCode(e){return({blue:"\x1b[34m",green:"\x1b[32m",yellow:"\x1b[33m",red:"\x1b[31m",purple:"\x1b[35m",cyan:"\x1b[36m"})[e]||""}formatMessage(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{prefix:n,color:t}=r,o=t?this.getColorCode(t):"";return"".concat(o).concat(n?"[".concat(n,"] "):"").concat(e).concat(t?"\x1b[0m":"")}log(e){for(var r=arguments.length,n=Array(r>1?r-1:0),t=1;t<r;t++)n[t-1]=arguments[t]}info(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}success(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}warn(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}error(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.formatMessage("❌ ".concat(e),{...n,color:"red"}),console.error("系統錯誤",(null==r?void 0:r.message)||e)}debug(e,r){arguments.length>2&&void 0!==arguments[2]&&arguments[2]}firebase(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}api(e,r,n){}performance(e,r){}}let o=new t;o.log.bind(o),o.info.bind(o),o.success.bind(o);let a=o.warn.bind(o),i=o.error.bind(o),u=o.debug.bind(o),c=o.firebase.bind(o);o.api.bind(o),o.performance.bind(o)}}]);