"use strict";exports.id=6973,exports.ids=[6973],exports.modules={42887:(e,a,s)=>{s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},69508:(e,a,s)=>{s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},79635:(e,a,s)=>{s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},91059:(e,a,s)=>{s.d(a,{g:()=>N});var t=s(10326),r=s(17577),l=s(74723),d=s(74064),o=s(770),i=s(78880);s(76),s(90445);var n=s(85999),c=s(38787),m=s(79635),x=s(48705),p=s(91664),f=s(24118),u=s(9969),h=s(41190),g=s(29280),j=s(82015);let b=o.Ry({name:o.Z_().min(2,{message:"供應商名稱至少需要 2 個字元"}),products:o.Z_().optional(),contactWindow:o.Z_().optional(),contactMethod:o.Z_().optional(),liaisonPersonId:o.Z_().optional(),notes:o.Z_().optional()});function N({isOpen:e,onOpenChange:a,onSupplierUpdate:s,supplierData:o}){let[N,y]=(0,r.useState)(!1),[w,v]=(0,r.useState)([]),k=!!o,Z=(0,l.cI)({resolver:(0,d.F)(b),defaultValues:{name:"",products:"",contactWindow:"",contactMethod:"",liaisonPersonId:"",notes:""}});async function z(e){y(!0);let t=n.Am.loading(k?"正在更新供應商...":"正在新增供應商...");try{let r=(0,i.$C)();if(console.log("提交的資料:",e),k){let a=(0,i.V1)(r,"updateSupplier"),s=await a({supplierId:o.id,...e});console.log("更新結果:",s),n.Am.success(`供應商 ${e.name} 的資料已成功更新。`,{id:t})}else{let a=(0,i.V1)(r,"createSupplier"),s=await a(e);console.log("建立結果:",s),n.Am.success(`供應商 ${e.name} 已成功建立。`,{id:t})}s(),a(!1)}catch(a){console.error("Error submitting supplier form:",a);let e=k?"更新供應商資料時發生錯誤。":"新增供應商時發生錯誤。";a instanceof Error&&(e=a.message),n.Am.error(e,{id:t})}finally{y(!1)}}return t.jsx(f.Vq,{open:e,onOpenChange:a,children:(0,t.jsxs)(f.cZ,{className:"max-w-3xl max-h-[90vh] overflow-y-auto","aria-describedby":"supplier-dialog-description",children:[(0,t.jsxs)(f.fK,{className:"relative",children:[(0,t.jsxs)(f.$N,{className:"flex items-center gap-2 pr-20",children:[t.jsx(c.Z,{className:"h-5 w-5"}),k?"編輯供應商資料":"新增供應商"]}),t.jsx(f.Be,{id:"supplier-dialog-description",className:"pr-20",children:k?"修改供應商的詳細聯絡資訊。":"請填寫新供應商的詳細聯絡資訊。"}),(0,t.jsxs)("div",{className:"absolute top-0 right-0 flex gap-2",children:[t.jsx(p.z,{type:"button",variant:"outline",size:"sm",onClick:()=>a(!1),children:"關閉"}),t.jsx(p.z,{form:"supplier-form",type:"submit",size:"sm",disabled:N,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white",children:N?"處理中...":k?"更新":"新增"})]})]}),t.jsx(u.l0,{...Z,children:(0,t.jsxs)("form",{id:"supplier-form",onSubmit:Z.handleSubmit(z),className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2 text-blue-800",children:[t.jsx(c.Z,{className:"h-4 w-4"}),"基本資料"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(u.Wi,{control:Z.control,name:"name",render:({field:e})=>(0,t.jsxs)(u.xJ,{children:[t.jsx(u.lX,{children:"供應商名稱 *"}),t.jsx(u.NI,{children:t.jsx(h.I,{placeholder:"例如：ABC 原料公司",...e})}),t.jsx(u.zG,{})]})}),t.jsx(u.Wi,{control:Z.control,name:"products",render:({field:e})=>(0,t.jsxs)(u.xJ,{children:[t.jsx(u.lX,{children:"供應商品"}),t.jsx(u.NI,{children:t.jsx(h.I,{placeholder:"例如：香精、原料、包材",...e})}),t.jsx(u.zG,{})]})})]})]}),(0,t.jsxs)("div",{className:"space-y-4 p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2 text-green-800",children:[t.jsx(m.Z,{className:"h-4 w-4"}),"聯絡資訊"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(u.Wi,{control:Z.control,name:"contactWindow",render:({field:e})=>(0,t.jsxs)(u.xJ,{children:[t.jsx(u.lX,{children:"聯絡窗口"}),t.jsx(u.NI,{children:t.jsx(h.I,{placeholder:"例如：王經理",...e})}),t.jsx(u.zG,{})]})}),t.jsx(u.Wi,{control:Z.control,name:"contactMethod",render:({field:e})=>(0,t.jsxs)(u.xJ,{children:[t.jsx(u.lX,{children:"聯絡方式"}),t.jsx(u.NI,{children:t.jsx(h.I,{placeholder:"例如：02-12345678 或 Line ID",...e,className:"border-green-300 focus:border-green-500 focus:ring-green-500"})}),t.jsx(u.zG,{})]})}),t.jsx(u.Wi,{control:Z.control,name:"liaisonPersonId",render:({field:e})=>(0,t.jsxs)(u.xJ,{children:[t.jsx(u.lX,{children:"對接人員"}),(0,t.jsxs)(g.Ph,{onValueChange:e.onChange,value:e.value,children:[t.jsx(u.NI,{children:t.jsx(g.i4,{children:t.jsx(g.ki,{placeholder:"選擇對接人員"})})}),t.jsx(g.Bw,{children:w.map(e=>t.jsx(g.Ql,{value:e.id,children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{children:e.name}),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.employeeId,")"]})]})},e.id))})]}),t.jsx(u.zG,{})]})})]})]}),(0,t.jsxs)("div",{className:"space-y-4 p-4 bg-gradient-to-r from-purple-50 to-violet-50 rounded-lg border border-purple-200",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2 text-purple-800",children:[t.jsx(x.Z,{className:"h-4 w-4"}),"備註資訊"]}),t.jsx(u.Wi,{control:Z.control,name:"notes",render:({field:e})=>(0,t.jsxs)(u.xJ,{children:[t.jsx(u.lX,{children:"詳細備註"}),t.jsx(u.NI,{children:t.jsx(j.g,{placeholder:"請輸入供應商相關的詳細備註資料...",className:"min-h-[120px] resize-none",...e})}),t.jsx(u.zG,{})]})})]})]})})]})})}},24118:(e,a,s)=>{s.d(a,{$N:()=>f,Be:()=>u,Vq:()=>i,cN:()=>p,cZ:()=>m,fK:()=>x});var t=s(10326),r=s(17577),l=s(98958),d=s(94019),o=s(51223);let i=l.fC;l.xz;let n=l.h_;l.x8;let c=r.forwardRef(({className:e,...a},s)=>t.jsx(l.aV,{ref:s,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));c.displayName=l.aV.displayName;let m=r.forwardRef(({className:e,children:a,...s},r)=>(0,t.jsxs)(n,{children:[t.jsx(c,{}),(0,t.jsxs)(l.VY,{ref:r,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-2xl translate-x-[-50%] translate-y-[-50%] gap-4 border-2 border-border bg-background shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg max-h-[90vh] overflow-y-auto","p-4 sm:p-6 mx-2 sm:mx-0","max-w-[calc(100vw-1rem)] sm:max-w-lg md:max-w-xl lg:max-w-2xl","max-h-[95vh] sm:max-h-[90vh]",e),...s,children:[a,(0,t.jsxs)(l.x8,{className:"absolute right-3 top-3 sm:right-4 sm:top-4 z-10 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground p-1",children:[t.jsx(d.Z,{className:"h-5 w-5 sm:h-4 sm:w-4"}),t.jsx("span",{className:"sr-only",children:"關閉"})]})]})]}));m.displayName=l.VY.displayName;let x=({className:e,...a})=>t.jsx("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left pb-4 border-b border-border",e),...a});x.displayName="DialogHeader";let p=({className:e,...a})=>t.jsx("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end gap-2 sm:gap-0 sm:space-x-2 pt-4 border-t border-border","[&>*]:w-full sm:[&>*]:w-auto",e),...a});p.displayName="DialogFooter";let f=r.forwardRef(({className:e,...a},s)=>t.jsx(l.Dx,{ref:s,className:(0,o.cn)("text-xl sm:text-2xl font-bold flex items-center gap-2 sm:gap-3 leading-tight",e),...a}));f.displayName=l.Dx.displayName;let u=r.forwardRef(({className:e,...a},s)=>t.jsx(l.dk,{ref:s,className:(0,o.cn)("text-sm text-muted-foreground",e),...a}));u.displayName=l.dk.displayName},9969:(e,a,s)=>{s.d(a,{NI:()=>h,Wi:()=>m,l0:()=>n,lX:()=>u,xJ:()=>f,zG:()=>g});var t=s(10326),r=s(17577),l=s(34214),d=s(74723),o=s(51223),i=s(44794);let n=d.RV,c=r.createContext({}),m=({...e})=>t.jsx(c.Provider,{value:{name:e.name},children:t.jsx(d.Qr,{...e})}),x=()=>{let e=r.useContext(c),a=r.useContext(p),{getFieldState:s}=(0,d.Gc)(),t=(0,d.cl)({name:e.name}),l=s(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=a;return{id:o,name:e.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...l}},p=r.createContext({});function f({className:e,...a}){let s=r.useId();return t.jsx(p.Provider,{value:{id:s},children:t.jsx("div",{"data-slot":"form-item",className:(0,o.cn)("grid gap-2",e),...a})})}function u({className:e,...a}){let{error:s,formItemId:r}=x();return t.jsx(i._,{"data-slot":"form-label","data-error":!!s,className:(0,o.cn)("data-[error=true]:text-destructive",e),htmlFor:r,...a})}function h({...e}){let{error:a,formItemId:s,formDescriptionId:r,formMessageId:d}=x();return t.jsx(l.g7,{"data-slot":"form-control",id:s,"aria-describedby":a?`${r} ${d}`:`${r}`,"aria-invalid":!!a,...e})}function g({className:e,...a}){let{error:s,formMessageId:r}=x(),l=s?String(s?.message??""):a.children;return l?t.jsx("p",{"data-slot":"form-message",id:r,className:(0,o.cn)("text-destructive text-sm",e),...a,children:l}):null}},41190:(e,a,s)=>{s.d(a,{I:()=>d});var t=s(10326),r=s(17577),l=s(51223);let d=r.forwardRef(({className:e,type:a,...s},r)=>t.jsx("input",{type:a,className:(0,l.cn)("flex w-full rounded-md border border-slate-200 bg-white px-3 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-800 dark:bg-slate-950 dark:ring-offset-slate-950 dark:placeholder:text-slate-400 dark:focus-visible:ring-slate-300","h-11 sm:h-10 py-3 sm:py-2","text-base sm:text-sm","min-h-[44px]",e),ref:r,...s}));d.displayName="Input"},44794:(e,a,s)=>{s.d(a,{_:()=>d});var t=s(10326);s(17577);var r=s(34478),l=s(51223);function d({className:e,...a}){return t.jsx(r.f,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}},29280:(e,a,s)=>{s.d(a,{Bw:()=>u,Ph:()=>c,Ql:()=>h,i4:()=>x,ki:()=>m});var t=s(10326),r=s(17577),l=s(38785),d=s(941),o=s(96633),i=s(32933),n=s(51223);let c=l.fC;l.ZA;let m=l.B4,x=r.forwardRef(({className:e,children:a,...s},r)=>(0,t.jsxs)(l.xz,{ref:r,className:(0,n.cn)("flex h-10 w-full items-center justify-between rounded-md border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 dark:border-slate-800 dark:bg-slate-950 dark:ring-offset-slate-950 dark:placeholder:text-slate-400 dark:focus:ring-slate-300",e),...s,children:[a,t.jsx(l.JO,{asChild:!0,children:t.jsx(d.Z,{className:"h-4 w-4 opacity-50"})})]}));x.displayName=l.xz.displayName;let p=r.forwardRef(({className:e,...a},s)=>t.jsx(l.u_,{ref:s,className:(0,n.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:t.jsx(o.Z,{className:"h-4 w-4"})}));p.displayName=l.u_.displayName;let f=r.forwardRef(({className:e,...a},s)=>t.jsx(l.$G,{ref:s,className:(0,n.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:t.jsx(d.Z,{className:"h-4 w-4"})}));f.displayName=l.$G.displayName;let u=r.forwardRef(({className:e,children:a,position:s="popper",...r},d)=>t.jsx(l.h_,{children:(0,t.jsxs)(l.VY,{ref:d,className:(0,n.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-slate-200 bg-white text-slate-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...r,children:[t.jsx(p,{}),t.jsx(l.l_,{className:(0,n.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),t.jsx(f,{})]})}));u.displayName=l.VY.displayName,r.forwardRef(({className:e,...a},s)=>t.jsx(l.__,{ref:s,className:(0,n.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a})).displayName=l.__.displayName;let h=r.forwardRef(({className:e,children:a,...s},r)=>(0,t.jsxs)(l.ck,{ref:r,className:(0,n.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-800 dark:focus:text-slate-50",e),...s,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(l.wU,{children:t.jsx(i.Z,{className:"h-4 w-4"})})}),t.jsx(l.eT,{children:a})]}));h.displayName=l.ck.displayName,r.forwardRef(({className:e,...a},s)=>t.jsx(l.Z0,{ref:s,className:(0,n.cn)("-mx-1 my-1 h-px bg-slate-100 dark:bg-slate-800",e),...a})).displayName=l.Z0.displayName},82015:(e,a,s)=>{s.d(a,{g:()=>d});var t=s(10326),r=s(17577),l=s(51223);let d=r.forwardRef(({className:e,...a},s)=>t.jsx("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...a}));d.displayName="Textarea"}};