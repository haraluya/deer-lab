"use strict";exports.id=9562,exports.ids=[9562],exports.modules={37358:(e,a,t)=>{t.d(a,{Z:()=>r});let r=(0,t(62881).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},98258:(e,a,t)=>{t.d(a,{Z:()=>r});let r=(0,t(62881).Z)("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]])},11019:(e,a,t)=>{t.d(a,{Z:()=>r});let r=(0,t(62881).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},21405:(e,a,t)=>{t.d(a,{Z:()=>r});let r=(0,t(62881).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},29752:(e,a,t)=>{t.d(a,{Ol:()=>d,SZ:()=>n,Zb:()=>o,aY:()=>i,eW:()=>c,ll:()=>l});var r=t(10326);t(17577);var s=t(51223);function o({className:e,...a}){return r.jsx("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-lg border-2 p-6 shadow-md",e),...a})}function d({className:e,...a}){return r.jsx("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 has-data-[slot=card-action]:grid-cols-[1fr_auto]",e),...a})}function l({className:e,...a}){return r.jsx("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...a})}function n({className:e,...a}){return r.jsx("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...a})}function i({className:e,...a}){return r.jsx("div",{"data-slot":"card-content",className:(0,s.cn)("",e),...a})}function c({className:e,...a}){return r.jsx("div",{"data-slot":"card-footer",className:(0,s.cn)("flex items-center",e),...a})}},24118:(e,a,t)=>{t.d(a,{$N:()=>u,Be:()=>h,Vq:()=>n,cN:()=>p,cZ:()=>m,fK:()=>f});var r=t(10326),s=t(17577),o=t(98958),d=t(94019),l=t(51223);let n=o.fC;o.xz;let i=o.h_;o.x8;let c=s.forwardRef(({className:e,...a},t)=>r.jsx(o.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));c.displayName=o.aV.displayName;let m=s.forwardRef(({className:e,children:a,...t},s)=>(0,r.jsxs)(i,{children:[r.jsx(c,{}),(0,r.jsxs)(o.VY,{ref:s,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-2xl translate-x-[-50%] translate-y-[-50%] gap-4 border-2 border-border bg-background shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg max-h-[90vh] overflow-y-auto","p-4 sm:p-6 mx-2 sm:mx-0","max-w-[calc(100vw-1rem)] sm:max-w-lg md:max-w-xl lg:max-w-2xl","max-h-[95vh] sm:max-h-[90vh]",e),...t,children:[a,(0,r.jsxs)(o.x8,{className:"absolute right-3 top-3 sm:right-4 sm:top-4 z-10 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground p-1",children:[r.jsx(d.Z,{className:"h-5 w-5 sm:h-4 sm:w-4"}),r.jsx("span",{className:"sr-only",children:"關閉"})]})]})]}));m.displayName=o.VY.displayName;let f=({className:e,...a})=>r.jsx("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left pb-4 border-b border-border",e),...a});f.displayName="DialogHeader";let p=({className:e,...a})=>r.jsx("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end gap-2 sm:gap-0 sm:space-x-2 pt-4 border-t border-border","[&>*]:w-full sm:[&>*]:w-auto",e),...a});p.displayName="DialogFooter";let u=s.forwardRef(({className:e,...a},t)=>r.jsx(o.Dx,{ref:t,className:(0,l.cn)("text-xl sm:text-2xl font-bold flex items-center gap-2 sm:gap-3 leading-tight",e),...a}));u.displayName=o.Dx.displayName;let h=s.forwardRef(({className:e,...a},t)=>r.jsx(o.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",e),...a}));h.displayName=o.dk.displayName},41190:(e,a,t)=>{t.d(a,{I:()=>d});var r=t(10326),s=t(17577),o=t(51223);let d=s.forwardRef(({className:e,type:a,...t},s)=>r.jsx("input",{type:a,className:(0,o.cn)("flex w-full rounded-md border border-slate-200 bg-white px-3 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-800 dark:bg-slate-950 dark:ring-offset-slate-950 dark:placeholder:text-slate-400 dark:focus-visible:ring-slate-300","h-11 sm:h-10 py-3 sm:py-2","text-base sm:text-sm","min-h-[44px]",e),ref:s,...t}));d.displayName="Input"},44794:(e,a,t)=>{t.d(a,{_:()=>d});var r=t(10326);t(17577);var s=t(34478),o=t(51223);function d({className:e,...a}){return r.jsx(s.f,{"data-slot":"label",className:(0,o.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}},29280:(e,a,t)=>{t.d(a,{Bw:()=>h,Ph:()=>c,Ql:()=>x,i4:()=>f,ki:()=>m});var r=t(10326),s=t(17577),o=t(38785),d=t(941),l=t(96633),n=t(32933),i=t(51223);let c=o.fC;o.ZA;let m=o.B4,f=s.forwardRef(({className:e,children:a,...t},s)=>(0,r.jsxs)(o.xz,{ref:s,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-md border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 dark:border-slate-800 dark:bg-slate-950 dark:ring-offset-slate-950 dark:placeholder:text-slate-400 dark:focus:ring-slate-300",e),...t,children:[a,r.jsx(o.JO,{asChild:!0,children:r.jsx(d.Z,{className:"h-4 w-4 opacity-50"})})]}));f.displayName=o.xz.displayName;let p=s.forwardRef(({className:e,...a},t)=>r.jsx(o.u_,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:r.jsx(l.Z,{className:"h-4 w-4"})}));p.displayName=o.u_.displayName;let u=s.forwardRef(({className:e,...a},t)=>r.jsx(o.$G,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:r.jsx(d.Z,{className:"h-4 w-4"})}));u.displayName=o.$G.displayName;let h=s.forwardRef(({className:e,children:a,position:t="popper",...s},d)=>r.jsx(o.h_,{children:(0,r.jsxs)(o.VY,{ref:d,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-slate-200 bg-white text-slate-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-50","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...s,children:[r.jsx(p,{}),r.jsx(o.l_,{className:(0,i.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),r.jsx(u,{})]})}));h.displayName=o.VY.displayName,s.forwardRef(({className:e,...a},t)=>r.jsx(o.__,{ref:t,className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a})).displayName=o.__.displayName;let x=s.forwardRef(({className:e,children:a,...t},s)=>(0,r.jsxs)(o.ck,{ref:s,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-slate-100 focus:text-slate-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-800 dark:focus:text-slate-50",e),...t,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(o.wU,{children:r.jsx(n.Z,{className:"h-4 w-4"})})}),r.jsx(o.eT,{children:a})]}));x.displayName=o.ck.displayName,s.forwardRef(({className:e,...a},t)=>r.jsx(o.Z0,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-slate-100 dark:bg-slate-800",e),...a})).displayName=o.Z0.displayName},41156:(e,a,t)=>{t.d(a,{RM:()=>l,SC:()=>n,iA:()=>o,pj:()=>c,ss:()=>i,xD:()=>d});var r=t(10326);t(17577);var s=t(51223);function o({className:e,...a}){return r.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:r.jsx("table",{"data-slot":"table",className:(0,s.cn)("w-full caption-bottom text-sm",e),...a})})}function d({className:e,...a}){return r.jsx("thead",{"data-slot":"table-header",className:(0,s.cn)("",e),...a})}function l({className:e,...a}){return r.jsx("tbody",{"data-slot":"table-body",className:(0,s.cn)("[&_tr:last-child]:border-0",e),...a})}function n({className:e,...a}){return r.jsx("tr",{"data-slot":"table-row",className:(0,s.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b border-border transition-colors",e),...a})}function i({className:e,...a}){return r.jsx("th",{"data-slot":"table-head",className:(0,s.cn)("bg-muted text-foreground font-semibold border-b border-border p-3 text-left align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}function c({className:e,...a}){return r.jsx("td",{"data-slot":"table-cell",className:(0,s.cn)("p-3 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...a})}},12859:(e,a,t)=>{t.d(a,{AZ:()=>c,Q$:()=>m,bU:()=>i,hz:()=>l,jK:()=>n,zN:()=>d});var r=t(90445),s=t(76);async function o(e){try{if(!r.db)throw Error("Firebase 未初始化");let a={...e,changeDate:s.EK.fromDate(e.changeDate),createdAt:s.EK.fromDate(new Date)};return(await (0,s.addDoc)((0,s.collection)(r.db,"inventory_records"),a)).id}catch(e){throw console.error("建立庫存紀錄失敗:",e),Error(`建立庫存紀錄失敗: ${e instanceof Error?e.message:"未知錯誤"}`)}}async function d(e={}){try{if(!r.db)throw Error("Firebase 未初始化");let{changeReason:a,operatorId:t,remarks:o,startDate:d,endDate:l,pageSize:n=10,lastDoc:i}=e,c=(0,s.query)((0,s.collection)(r.db,"inventory_records"),(0,s.Xo)("changeDate","desc"));a&&(c=(0,s.query)(c,(0,s.where)("changeReason","==",a))),t&&(c=(0,s.query)(c,(0,s.where)("operatorId","==",t))),o&&(c=(0,s.query)(c,(0,s.where)("remarks",">=",o),(0,s.where)("remarks","<=",o+""))),d&&(c=(0,s.query)(c,(0,s.where)("changeDate",">=",s.EK.fromDate(d)))),l&&(c=(0,s.query)(c,(0,s.where)("changeDate","<=",s.EK.fromDate(l)))),i&&(c=(0,s.query)(c,(0,s.TQ)(i))),c=(0,s.query)(c,(0,s.b9)(n));let m=await (0,s.getDocs)(c),f=[];m.forEach(e=>{let a=e.data();f.push({id:e.id,changeDate:a.changeDate.toDate(),changeReason:a.changeReason,operatorId:a.operatorId,operatorName:a.operatorName,remarks:a.remarks,relatedDocumentId:a.relatedDocumentId,relatedDocumentType:a.relatedDocumentType,details:a.details||[],createdAt:a.createdAt.toDate()})});let p=m.docs[m.docs.length-1]||null,u=m.docs.length===n;return{records:f,lastDoc:p,hasMore:u}}catch(e){throw console.error("查詢庫存紀錄失敗:",e),Error(`查詢庫存紀錄失敗: ${e instanceof Error?e.message:"未知錯誤"}`)}}async function l(e,a,t=20){try{if(!r.db)throw Error("Firebase 未初始化");let o=(0,s.query)((0,s.collection)(r.db,"inventory_records"),(0,s.Xo)("changeDate","desc"),(0,s.b9)(t)),d=await (0,s.getDocs)(o),l=[];return d.forEach(t=>{let r=t.data(),s=r.details||[];s.some(t=>t.itemId===e&&t.itemType===a)&&l.push({id:t.id,changeDate:r.changeDate.toDate(),changeReason:r.changeReason,operatorId:r.operatorId,operatorName:r.operatorName,remarks:r.remarks,relatedDocumentId:r.relatedDocumentId,relatedDocumentType:r.relatedDocumentType,details:s,createdAt:r.createdAt.toDate()})}),l}catch(e){throw console.error("查詢物料庫存歷史失敗:",e),Error(`查詢物料庫存歷史失敗: ${e instanceof Error?e.message:"未知錯誤"}`)}}async function n(e,a){return o({changeDate:new Date,changeReason:e,...a})}function i(e){return({purchase:"採購購入",workorder:"工單領料",inventory_check:"庫存盤點",manual_adjustment:"直接修改"})[e]||e}function c(e){return({material:"物料",fragrance:"香精"})[e]||e}function m(e,a,t){return e.details.find(e=>e.itemId===a&&e.itemType===t)||null}}};