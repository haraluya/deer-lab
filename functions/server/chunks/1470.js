"use strict";exports.id=1470,exports.ids=[1470],exports.modules={36283:(e,s,a)=>{a.d(s,{Z:()=>l});let l=(0,a(62881).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},40617:(e,s,a)=>{a.d(s,{Z:()=>l});let l=(0,a(62881).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},79635:(e,s,a)=>{a.d(s,{Z:()=>l});let l=(0,a(62881).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},71470:(e,s,a)=>{a.d(s,{w:()=>p});var l=a(10326),t=a(17577),r=a(24118),d=a(38443),x=a(29752),n=a(41156),c=a(91664),i=a(48705),m=a(79635),h=a(37358),g=a(36283),j=a(40617);let o=(0,a(62881).Z)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);var y=a(12714),b=a(12859);function p({record:e,isOpen:s,onClose:a,onViewItemHistory:p}){let[N,u]=(0,t.useState)(null),[v,f]=(0,t.useState)(null);if(!e)return null;let Z=e=>new Intl.DateTimeFormat("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(e),k=e=>e>0?"text-green-600":e<0?"text-red-600":"text-gray-600",w=e=>e>0?"↗️":e<0?"↘️":"→",C=(e,s)=>{p&&p(e,s)};return l.jsx(r.Vq,{open:s,onOpenChange:a,children:(0,l.jsxs)(r.cZ,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[l.jsx(r.fK,{children:l.jsx(r.$N,{className:"text-xl font-bold text-gray-800",children:"庫存動作詳情"})}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)(x.Zb,{className:"border-l-4 border-l-blue-500",children:[l.jsx(x.Ol,{className:"pb-3",children:(0,l.jsxs)(x.ll,{className:"text-lg text-gray-800 flex items-center gap-2",children:[l.jsx(i.Z,{className:"h-5 w-5 text-blue-500"}),"動作基本資訊"]})}),l.jsx(x.aY,{className:"space-y-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"變動原因"}),l.jsx("div",{className:"mt-1",children:l.jsx(d.C,{variant:"outline",className:`text-sm ${"purchase"===e.changeReason?"border-green-200 text-green-700 bg-green-50":"workorder"===e.changeReason?"border-orange-200 text-orange-700 bg-orange-50":"inventory_check"===e.changeReason?"border-blue-200 text-blue-700 bg-blue-50":"border-gray-200 text-gray-700 bg-gray-50"}`,children:(0,b.bU)(e.changeReason)})})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"影響項目數量"}),(0,l.jsxs)("div",{className:"mt-1 text-2xl font-bold text-blue-600",children:[e.details.length," 項"]})]})]})})]}),(0,l.jsxs)(x.Zb,{className:"border-l-4 border-l-purple-500",children:[l.jsx(x.Ol,{className:"pb-3",children:(0,l.jsxs)(x.ll,{className:"text-lg text-gray-800 flex items-center gap-2",children:[l.jsx(m.Z,{className:"h-5 w-5 text-purple-500"}),"操作資訊"]})}),(0,l.jsxs)(x.aY,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"操作人員"}),l.jsx("div",{className:"mt-1 text-sm bg-gray-50 px-3 py-2 rounded-md border",children:e.operatorName})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"操作時間"}),(0,l.jsxs)("div",{className:"mt-1 text-sm bg-gray-50 px-3 py-2 rounded-md border flex items-center gap-2",children:[l.jsx(h.Z,{className:"h-4 w-4 text-gray-500"}),Z(e.changeDate)]})]})]}),e.relatedDocumentId&&(0,l.jsxs)("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"相關文件"}),(0,l.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[l.jsx(g.Z,{className:"h-4 w-4 text-gray-500"}),(0,l.jsxs)("span",{className:"text-sm bg-blue-50 px-3 py-2 rounded-md border text-blue-700",children:[e.relatedDocumentType||"相關文件",": ",e.relatedDocumentId]})]})]})]})]}),e.remarks&&(0,l.jsxs)(x.Zb,{className:"border-l-4 border-l-orange-500",children:[l.jsx(x.Ol,{className:"pb-3",children:(0,l.jsxs)(x.ll,{className:"text-lg text-gray-800 flex items-center gap-2",children:[l.jsx(j.Z,{className:"h-5 w-5 text-orange-500"}),"備註"]})}),l.jsx(x.aY,{children:l.jsx("div",{className:"text-sm bg-orange-50 px-4 py-3 rounded-md border border-orange-200 text-orange-800",children:e.remarks})})]}),(0,l.jsxs)(x.Zb,{className:"border-l-4 border-l-green-500",children:[l.jsx(x.Ol,{className:"pb-3",children:(0,l.jsxs)(x.ll,{className:"text-lg text-gray-800 flex items-center gap-2",children:[l.jsx(o,{className:"h-5 w-5 text-green-500"}),"影響項目明細 (",e.details.length," 項)"]})}),l.jsx(x.aY,{children:l.jsx("div",{className:"overflow-x-auto",children:(0,l.jsxs)(n.iA,{children:[l.jsx(n.xD,{children:(0,l.jsxs)(n.SC,{children:[l.jsx(n.ss,{children:"類型"}),l.jsx(n.ss,{children:"編號"}),l.jsx(n.ss,{children:"名稱"}),l.jsx(n.ss,{children:"變動數量"}),l.jsx(n.ss,{children:"變動後數量"}),l.jsx(n.ss,{children:"操作"})]})}),l.jsx(n.RM,{children:e.details.map((e,s)=>(0,l.jsxs)(n.SC,{children:[l.jsx(n.pj,{children:l.jsx(d.C,{variant:"secondary",className:"text-xs",children:(0,b.AZ)(e.itemType)})}),l.jsx(n.pj,{className:"font-mono text-sm",children:e.itemCode}),l.jsx(n.pj,{className:"text-sm",children:e.itemName}),l.jsx(n.pj,{children:(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsxs)("span",{className:`font-bold ${k(e.quantityChange)}`,children:[w(e.quantityChange)," ",Math.abs(e.quantityChange)]}),l.jsx(d.C,{variant:e.quantityChange>0?"default":"destructive",className:"text-xs",children:e.quantityChange>0?"增加":e.quantityChange<0?"減少":"無變動"})]})}),l.jsx(n.pj,{className:"font-bold text-gray-800",children:e.quantityAfter}),l.jsx(n.pj,{children:(0,l.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>C(e.itemId,e.itemType),className:"text-xs",children:[l.jsx(y.Z,{className:"h-3 w-3 mr-1"}),"查看歷史"]})})]},s))})]})})})]}),(0,l.jsxs)(x.Zb,{className:"border-l-4 border-l-gray-500",children:[l.jsx(x.Ol,{className:"pb-3",children:(0,l.jsxs)(x.ll,{className:"text-lg text-gray-800 flex items-center gap-2",children:[l.jsx(i.Z,{className:"h-5 w-5 text-gray-500"}),"系統資訊"]})}),l.jsx(x.aY,{children:(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:["建立時間：",Z(e.createdAt)]})})]})]})]})})}}};