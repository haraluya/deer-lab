(()=>{var e={};e.id=6473,e.ids=[6473],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},49024:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>o,routeModule:()=>p,tree:()=>c}),s(69250),s(22834),s(62510),s(35866);var r=s(23191),a=s(88716),i=s(37922),l=s.n(i),n=s(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let c=["",{children:["dashboard",{children:["purchase-orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,69250)),"D:\\APP\\deer-lab\\src\\app\\dashboard\\purchase-orders\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,22834)),"D:\\APP\\deer-lab\\src\\app\\dashboard\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,62510)),"D:\\APP\\deer-lab\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["D:\\APP\\deer-lab\\src\\app\\dashboard\\purchase-orders\\page.tsx"],m="/dashboard/purchase-orders/page",u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/purchase-orders/page",pathname:"/dashboard/purchase-orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},20835:(e,t,s)=>{Promise.resolve().then(s.bind(s,49941))},37358:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},11890:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},10591:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]])},12714:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},41137:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},83855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},88307:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},79635:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},94019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(62881).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},49941:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>$});var r=s(10326),a=s(17577),i=s(35047),l=s(76),n=s(90445),d=s(78880),c=s(85999),o=s(57671),m=s(41137),u=s(38787),p=s(79635),x=s(12714),h=s(37358),b=s(11890),f=s(39183),g=s(88307),j=s(94019),v=s(48705),y=s(10591),N=s(83855),w=s(41156),k=s(91664),C=s(38443),Z=s(41190),P=s(9280),z=s(29752),D=s(24118);function S(){let e=(0,i.useRouter)(),[t,s]=(0,a.useState)([]),[S,$]=(0,a.useState)([]),[I,R]=(0,a.useState)(!0),[M,q]=(0,a.useState)("all"),[A,E]=(0,a.useState)(1),[_]=(0,a.useState)(10),[O,F]=(0,a.useState)(""),[L,T]=(0,a.useState)([]),[V,W]=(0,a.useState)(!1),[U,B]=(0,a.useState)([]),[G,X]=(0,a.useState)([]),[Y,K]=(0,a.useState)([]),[H,J]=(0,a.useState)("items"),[Q,ee]=(0,a.useState)([]),[et,es]=(0,a.useState)(new Set),[er,ea]=(0,a.useState)(!1),[ei,el]=(0,a.useState)(!1),en=(0,a.useCallback)(async()=>{R(!0);try{if(!n.db)throw Error("Firebase 未初始化");let e=new Map,t=new Map;(await (0,l.getDocs)((0,l.collection)(n.db,"suppliers"))).forEach(t=>e.set(t.id,t.data().name)),(await (0,l.getDocs)((0,l.collection)(n.db,"users"))).forEach(e=>t.set(e.id,e.data().name));let r=(await (0,l.getDocs)((0,l.collection)(n.db,"purchaseOrders"))).docs.map(s=>{let r=s.data(),a=r.createdAt?.toDate().toLocaleDateString("zh-TW",{year:"numeric",month:"long",day:"numeric"})||"N/A";return{id:s.id,code:r.code,supplierName:e.get(r.supplierRef?.id)||"未知供應商",status:r.status,createdByName:t.get(r.createdByRef?.id)||"未知人員",createdAt:a}});s(r.sort((e,t)=>t.code.localeCompare(e.code)))}catch(e){console.error("讀取採購單資料失敗:",e),c.Am.error("讀取採購單資料失敗。")}finally{R(!1)}},[]);(0,a.useCallback)(async()=>{try{if(!n.db)throw Error("Firebase 未初始化");let e=await (0,l.getDocs)((0,l.collection)(n.db,"suppliers")),t=e.docs.map(e=>({id:e.id,name:e.data().name}));K(t);let s=new Map;e.forEach(e=>s.set(e.id,e.data().name));let r=(await (0,l.getDocs)((0,l.collection)(n.db,"materials"))).docs.map(e=>{let t=e.data();return{id:e.id,name:t.name,code:t.code,type:"material",supplierId:t.supplierRef?.id||"",supplierName:t.supplierRef?.id?s.get(t.supplierRef.id)||"未知供應商":"未指定",unit:t.unit||"",costPerUnit:t.costPerUnit||0,currentStock:t.currentStock||0}}),a=(await (0,l.getDocs)((0,l.collection)(n.db,"fragrances"))).docs.map(e=>{let t=e.data();return{id:e.id,name:t.name,code:t.code,type:"fragrance",supplierId:t.supplierRef?.id||"",supplierName:t.supplierRef?.id?s.get(t.supplierRef.id)||"未知供應商":"未指定",unit:t.unit||"KG",costPerUnit:t.costPerUnit||0,currentStock:t.currentStock||0}});B(r),X(a)}catch(e){console.error("載入物料和香精資料失敗:",e),c.Am.error("載入物料和香精資料失敗。")}},[]),(0,a.useCallback)(()=>{try{let e=localStorage.getItem("purchaseCart");e&&ee(JSON.parse(e))}catch(e){console.error("載入採購車失敗:",e)}},[]);let ed=(0,a.useCallback)(e=>{try{localStorage.setItem("purchaseCart",JSON.stringify(e)),window.dispatchEvent(new CustomEvent("purchaseCartUpdated"))}catch(e){console.error("保存採購車失敗:",e)}},[]),ec=(0,a.useCallback)(e=>{if(F(e),!e.trim()){T([]);return}"suppliers"===H?T(Y.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())).sort((e,t)=>e.name.localeCompare(t.name,"zh-TW")).slice(0,10).map(e=>({id:e.id,name:e.name,code:"",type:"supplier",supplierId:e.id,supplierName:e.name,unit:"",costPerUnit:0,currentStock:0}))):T([...U,...G].filter(t=>t.name.toLowerCase().includes(e.toLowerCase())||t.code.toLowerCase().includes(e.toLowerCase())||t.supplierName.toLowerCase().includes(e.toLowerCase())).sort((e,t)=>e.name.localeCompare(t.name,"zh-TW")).slice(0,10))},[U,G,Y,H]),eo=(0,a.useCallback)(e=>{if("supplier"===e.type){let t=[...U,...G].filter(t=>t.supplierId===e.supplierId);if(t.length>0){T(t.slice(0,10)),J("items"),c.Am.success(`顯示 ${e.name} 供應商的所有項目`);return}c.Am.info(`供應商 ${e.name} 目前沒有物料或香精`);return}if("material"===e.type||"fragrance"===e.type){if(Q.find(t=>t.id===e.id&&t.type===e.type)){let t=Q.map(t=>t.id===e.id&&t.type===e.type?{...t,quantity:t.quantity+1}:t);ee(t),ed(t),c.Am.success(`已增加 ${e.name} 的數量`)}else{let t=[...Q,{id:e.id,name:e.name,code:e.code,type:e.type,supplierId:e.supplierId,supplierName:e.supplierName,unit:e.unit,costPerUnit:e.costPerUnit,quantity:1}];ee(t),ed(t),c.Am.success(`已將 ${e.name} 加入採購車`)}}},[Q,ed,U,G]),em=(0,a.useCallback)((e,t)=>{let s=Q.filter(s=>!(s.id===e&&s.type===t));ee(s),ed(s),c.Am.success("已從採購車移除")},[Q,ed]),eu=(0,a.useCallback)((e,t,s)=>{if(s<=0){em(e,t);return}let r=Q.map(r=>r.id===e&&r.type===t?{...r,quantity:s}:r);ee(r),ed(r)},[Q,em,ed]),ep=(0,a.useCallback)((e,t)=>{let s=`${e}-${t}`;es(e=>{let t=new Set(e);return t.has(s)?t.delete(s):t.add(s),t})},[]),ex=(0,a.useCallback)(e=>{let t=Q.filter(t=>t.supplierId===e).map(e=>`${e.id}-${e.type}`);es(e=>{let s=new Set(e);return t.every(e=>s.has(e))?t.forEach(e=>s.delete(e)):t.forEach(e=>s.add(e)),s})},[Q]),eh=(0,a.useCallback)(()=>{el(!0)},[]),eb=(0,a.useCallback)(async()=>{ea(!0);let e=c.Am.loading("正在建立採購單...");try{let t;let s=(0,d.$C)(),r=(0,d.V1)(s,"createPurchaseOrders");if(t=0===et.size?Q:Q.filter(e=>et.has(`${e.id}-${e.type}`)),0===t.length){c.Am.error("沒有項目可以建立採購單",{id:e});return}let a=t.reduce((e,t)=>(e[t.supplierId]||(e[t.supplierId]={supplierId:t.supplierId,items:[]}),e[t.supplierId].items.push({id:t.id,name:t.name,code:t.code,quantity:t.quantity,unit:t.unit,itemRefPath:`${"material"===t.type?"materials":"fragrances"}/${t.id}`}),e),{}),i={suppliers:Object.values(a)};await r(i),c.Am.success(`成功建立 ${Object.keys(a).length} 張採購單`,{id:e});let l=Q.filter(e=>!t.some(t=>t.id===e.id&&t.type===e.type));ee(l),ed(l),es(new Set),el(!1),en()}catch(t){console.error("建立採購單失敗:",t),c.Am.error("建立採購單失敗",{id:e})}finally{ea(!1)}},[et,Q,en,ed]),ef=(0,a.useMemo)(()=>{let e="all"===M?t:t.filter(e=>e.status===M),s=(A-1)*_;return e.slice(s,s+_)},[t,M,A,_]),eg=(0,a.useMemo)(()=>Math.ceil(("all"===M?t:t.filter(e=>e.status===M)).length/_),[t,M,_]),ej=(0,a.useMemo)(()=>{let e={};return Q.forEach(t=>{e[t.supplierId]||(e[t.supplierId]={supplierId:t.supplierId,supplierName:t.supplierName||"未指定供應商",items:[]}),e[t.supplierId].items.push(t)}),Object.values(e)},[Q]),ev=(0,a.useMemo)(()=>Q.reduce((e,t)=>e+t.costPerUnit*t.quantity,0),[Q]);return(0,r.jsxs)("div",{className:"container mx-auto py-10 purchase-orders-page",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-amber-600 to-orange-600 bg-clip-text text-transparent",children:"採購管理"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"管理採購訂單與供應商交易"})]}),(0,r.jsxs)(z.Zb,{className:"mb-6",children:[r.jsx(z.Ol,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(o.Z,{className:"h-5 w-5 text-amber-600"}),r.jsx(z.ll,{children:"採購清單"})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["共 ",t.length," 張採購單"]})]})}),(0,r.jsxs)(z.aY,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(m.Z,{className:"h-4 w-4 text-gray-500"}),r.jsx("span",{className:"text-sm text-gray-600",children:"狀態篩選："}),r.jsx(k.z,{variant:"all"===M?"default":"outline",size:"sm",onClick:()=>q("all"),className:"bg-amber-600 hover:bg-amber-700",children:"全部"}),r.jsx(k.z,{variant:"預報單"===M?"default":"outline",size:"sm",onClick:()=>q("預報單"),className:"預報單"===M?"bg-purple-600 hover:bg-purple-700":"border-purple-200 text-purple-600 hover:bg-purple-50",children:"預報單"}),r.jsx(k.z,{variant:"已訂購"===M?"default":"outline",size:"sm",onClick:()=>q("已訂購"),className:"已訂購"===M?"bg-green-600 hover:bg-green-700":"border-green-200 text-green-600 hover:bg-green-50",children:"已訂購"}),r.jsx(k.z,{variant:"已收貨"===M?"default":"outline",size:"sm",onClick:()=>q("已收貨"),className:"已收貨"===M?"bg-gray-600 hover:bg-gray-700":"border-gray-200 text-gray-600 hover:bg-gray-50",children:"已入庫"})]}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:(0,r.jsxs)(w.iA,{children:[r.jsx(w.xD,{children:(0,r.jsxs)(w.SC,{children:[r.jsx(w.ss,{children:"採購單資訊"}),r.jsx(w.ss,{children:"供應商"}),r.jsx(w.ss,{children:"建立人員"}),r.jsx(w.ss,{children:"狀態"}),r.jsx(w.ss,{children:"採購金額"}),r.jsx(w.ss,{children:"操作"})]})}),r.jsx(w.RM,{children:I?r.jsx(w.SC,{children:r.jsx(w.pj,{colSpan:5,className:"text-center py-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[r.jsx("div",{className:"w-6 h-6 border-2 border-amber-200 border-t-amber-600 rounded-full animate-spin mr-2"}),"載入中..."]})})}):ef.length>0?ef.map(t=>(0,r.jsxs)(w.SC,{className:"hover:bg-amber-50/50 cursor-pointer",onClick:()=>e.push(`/dashboard/purchase-orders/${t.id}`),children:[r.jsx(w.pj,{children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-600 rounded-lg flex items-center justify-center",children:r.jsx(o.Z,{className:"h-5 w-5 text-white"})}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-semibold text-gray-900",children:t.code}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["ID: ",t.id]})]})]})}),r.jsx(w.pj,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(u.Z,{className:"h-4 w-4 text-blue-600"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:t.supplierName})]})}),r.jsx(w.pj,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(p.Z,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:t.createdByName})]})}),r.jsx(w.pj,{children:r.jsx(C.C,{className:`${"預報單"===t.status?"bg-purple-100 text-purple-800":"已訂購"===t.status?"bg-green-100 text-green-800":"已收貨"===t.status?"bg-gray-600 text-white":"已取消"===t.status?"bg-red-100 text-red-800":"bg-gray-600 text-white"}`,children:t.status})}),r.jsx(w.pj,{children:r.jsx("div",{className:"flex items-center gap-2",children:(0,r.jsxs)("span",{className:"text-sm font-semibold text-amber-600",children:["NT$ ",t.totalAmount?t.totalAmount.toLocaleString():"0"]})})}),r.jsx(w.pj,{onClick:e=>e.stopPropagation(),children:(0,r.jsxs)(k.z,{variant:"ghost",size:"sm",onClick:()=>e.push(`/dashboard/purchase-orders/${t.id}`),className:"text-amber-600 hover:text-amber-700",children:[r.jsx(x.Z,{className:"h-4 w-4 mr-1"}),"查看"]})})]},t.id)):r.jsx(w.SC,{children:r.jsx(w.pj,{colSpan:5,className:"text-center py-8",children:r.jsx("div",{className:"text-gray-500",children:"all"===M?"沒有採購單資料":`沒有${M}狀態的採購單`})})})})]})}),r.jsx("div",{className:"md:hidden",children:I?r.jsx("div",{className:"flex items-center justify-center py-12",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 border-2 border-amber-200 border-t-amber-600 rounded-full animate-spin"}),r.jsx("span",{className:"text-sm text-gray-600",children:"載入中..."})]})}):ef.length>0?r.jsx("div",{className:"space-y-4",children:ef.map(t=>(0,r.jsxs)("div",{onClick:()=>e.push(`/dashboard/purchase-orders/${t.id}`),className:"bg-white border border-amber-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-600 rounded-lg flex items-center justify-center shrink-0",children:r.jsx(o.Z,{className:"h-6 w-6 text-white"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-semibold text-gray-900 text-lg mb-1 truncate",children:t.code}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[r.jsx(h.Z,{className:"inline h-3 w-3 mr-1"}),t.createdAt]})]})]}),r.jsx(C.C,{className:`shrink-0 ml-2 ${"預報單"===t.status?"bg-purple-100 text-purple-800":"已訂購"===t.status?"bg-green-100 text-green-800":"已收貨"===t.status?"bg-gray-600 text-white":"已取消"===t.status?"bg-red-100 text-red-800":"bg-gray-600 text-white"}`,children:t.status})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-blue-50 rounded-lg",children:[r.jsx(u.Z,{className:"h-4 w-4 text-blue-600 shrink-0"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-xs text-blue-600 font-medium mb-1",children:"供應商"}),r.jsx("div",{className:"text-sm font-semibold text-blue-800 truncate",children:t.supplierName})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(p.Z,{className:"h-3 w-3 text-gray-500"}),r.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"建立人員"})]}),r.jsx("div",{className:"text-sm font-semibold text-gray-800 truncate",children:t.createdByName})]}),(0,r.jsxs)("div",{className:"p-3 bg-amber-50 rounded-lg",children:[r.jsx("div",{className:"text-xs text-amber-600 font-medium mb-1",children:"採購金額"}),(0,r.jsxs)("div",{className:"text-sm font-bold text-amber-800",children:["NT$ ",t.totalAmount?t.totalAmount.toLocaleString():"0"]})]})]})]}),r.jsx("div",{className:"flex justify-end mt-4 pt-3 border-t border-gray-100",children:(0,r.jsxs)(k.z,{onClick:s=>{s.stopPropagation(),e.push(`/dashboard/purchase-orders/${t.id}`)},className:"bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white px-4 py-2 rounded-lg font-medium shadow-sm hover:shadow transition-all duration-200 min-h-[44px]",children:[r.jsx(x.Z,{className:"mr-2 h-4 w-4"}),"檢視採購單"]})})]},t.id))}):(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(o.Z,{className:"h-8 w-8 text-amber-500"})}),r.jsx("div",{className:"text-lg font-medium text-gray-800 mb-2",children:"all"===M?"沒有採購單資料":`沒有${M}狀態的採購單`}),r.jsx("p",{className:"text-sm text-gray-500",children:"建立第一個採購單開始管理採購流程"})]})}),eg>1&&(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-4",children:[r.jsx(k.z,{variant:"outline",size:"sm",onClick:()=>E(e=>Math.max(1,e-1)),disabled:1===A,className:"border-amber-200 text-amber-600 hover:bg-amber-50",children:r.jsx(b.Z,{className:"h-4 w-4"})}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["第 ",A," 頁，共 ",eg," 頁"]}),r.jsx(k.z,{variant:"outline",size:"sm",onClick:()=>E(e=>Math.min(eg,e+1)),disabled:A===eg,className:"border-amber-200 text-amber-600 hover:bg-amber-50",children:r.jsx(f.Z,{className:"h-4 w-4"})})]})]})]}),(0,r.jsxs)(z.Zb,{className:"mb-6",children:[r.jsx(z.Ol,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(g.Z,{className:"h-5 w-5 text-amber-600"}),r.jsx(z.ll,{children:"搜尋物料與香精"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(k.z,{variant:"items"===H?"default":"outline",size:"sm",onClick:()=>{J("items"),T([]),F("")},className:"items"===H?"bg-amber-600 hover:bg-amber-700":"border-amber-200 text-amber-600 hover:bg-amber-50",children:"物料/香精"}),r.jsx(k.z,{variant:"suppliers"===H?"default":"outline",size:"sm",onClick:()=>{J("suppliers"),T([]),F("")},className:"suppliers"===H?"bg-amber-600 hover:bg-amber-700":"border-amber-200 text-amber-600 hover:bg-amber-50",children:"供應商"})]})]})}),(0,r.jsxs)(z.aY,{children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx(g.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(Z.I,{placeholder:"suppliers"===H?"輸入供應商名稱搜尋...":"輸入物料名稱、代號、香精名稱或供應商名稱搜尋...",value:O,onChange:e=>ec(e.target.value),className:"pl-10 pr-4 py-3 border-amber-200 focus:border-amber-500 focus:ring-amber-500"}),L.length>0&&r.jsx(k.z,{variant:"ghost",size:"sm",onClick:()=>{T([]),F("")},className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0 text-gray-400 hover:text-gray-600",children:r.jsx(j.Z,{className:"h-4 w-4"})})]}),L.length>0&&(0,r.jsxs)("div",{className:"mt-4 border border-amber-200 rounded-lg overflow-hidden",children:[r.jsx("div",{className:"bg-amber-50 px-4 py-2 border-b border-amber-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-amber-800",children:["搜尋結果 (",L.length,")"]}),r.jsx("span",{className:"text-xs text-amber-600",children:"suppliers"===H?"供應商搜尋":"物料/香精搜尋"})]})}),r.jsx("div",{className:"max-h-60 overflow-y-auto",children:L.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 hover:bg-amber-50/50 border-b border-amber-100 last:border-b-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${"material"===e.type?"bg-blue-100 text-blue-600":"fragrance"===e.type?"bg-pink-100 text-pink-600":"bg-green-100 text-green-600"}`,children:"material"===e.type?r.jsx(v.Z,{className:"h-4 w-4"}):"fragrance"===e.type?r.jsx(y.Z,{className:"h-4 w-4"}):r.jsx(u.Z,{className:"h-4 w-4"})}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:e.name}),r.jsx("div",{className:"text-sm text-gray-500",children:"supplier"===e.type?"供應商":`${e.code} • ${e.supplierName} • 庫存: ${e.currentStock} ${e.unit}`})]})]}),r.jsx(k.z,{size:"sm",onClick:()=>eo(e),className:"supplier"===e.type?"bg-green-600 hover:bg-green-700 text-white":"bg-amber-600 hover:bg-amber-700 text-white",children:"supplier"===e.type?(0,r.jsxs)(r.Fragment,{children:[r.jsx(x.Z,{className:"h-4 w-4 mr-1"}),"查看項目"]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(N.Z,{className:"h-4 w-4 mr-1"}),"加入採購車"]})})]},`${e.id}-${e.type}`))})]})]})]}),(0,r.jsxs)(z.Zb,{children:[r.jsx(z.Ol,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(o.Z,{className:"h-5 w-5 text-amber-600"}),r.jsx(z.ll,{children:"採購車"}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:["(",Q.length," 個項目，總計 NT$ ",ev.toLocaleString(),")"]})]}),Q.length>0&&(0,r.jsxs)(k.z,{onClick:eh,disabled:er,className:"bg-amber-600 hover:bg-amber-700 text-white",children:[r.jsx(o.Z,{className:"mr-2 h-4 w-4"}),"建立採購單"]})]})}),r.jsx(z.aY,{children:0===Q.length?(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(o.Z,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),r.jsx("p",{children:"採購車是空的"}),r.jsx("p",{className:"text-sm",children:"使用上方的搜尋欄來添加物料或香精"})]}):r.jsx("div",{className:"space-y-6",children:ej.map(e=>(0,r.jsxs)("div",{className:"border border-amber-200 rounded-lg overflow-hidden",children:[r.jsx("div",{className:"bg-amber-50 px-4 py-3 border-b border-amber-200",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(P.X,{checked:e.items.every(e=>et.has(`${e.id}-${e.type}`)),onCheckedChange:()=>ex(e.supplierId),className:"border-amber-300 data-[state=checked]:bg-amber-600 data-[state=checked]:border-amber-600"}),r.jsx(u.Z,{className:"h-4 w-4 text-blue-600"}),r.jsx("span",{className:"font-medium text-amber-800",children:e.supplierName}),(0,r.jsxs)("span",{className:"text-sm text-amber-600",children:["(",e.items.length," 項)"]})]})}),r.jsx("div",{className:"divide-y divide-amber-100",children:e.items.map(e=>r.jsx("div",{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx(P.X,{checked:et.has(`${e.id}-${e.type}`),onCheckedChange:()=>ep(e.id,e.type),className:"border-amber-300 data-[state=checked]:bg-amber-600 data-[state=checked]:border-amber-600"}),r.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${"material"===e.type?"bg-blue-100 text-blue-600":"bg-pink-100 text-pink-600"}`,children:"material"===e.type?r.jsx(v.Z,{className:"h-4 w-4"}):r.jsx(y.Z,{className:"h-4 w-4"})}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.code," • NT$ ",e.costPerUnit.toLocaleString(),"/",e.unit]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx(k.z,{variant:"outline",size:"sm",onClick:()=>eu(e.id,e.type,e.quantity-1),className:"h-8 w-8 p-0 border-amber-200 text-amber-600 hover:bg-amber-50",children:"-"}),r.jsx(Z.I,{type:"number",min:"1",value:e.quantity,onChange:t=>{let s=parseInt(t.target.value)||1;eu(e.id,e.type,s)},className:"w-16 h-8 text-center text-sm border-amber-200 focus:border-amber-500 focus:ring-amber-500"}),r.jsx("span",{className:"text-sm text-gray-500",children:e.unit}),r.jsx(k.z,{variant:"outline",size:"sm",onClick:()=>eu(e.id,e.type,e.quantity+1),className:"h-8 w-8 p-0 border-amber-200 text-amber-600 hover:bg-amber-50",children:"+"})]}),r.jsx(k.z,{variant:"ghost",size:"sm",onClick:()=>em(e.id,e.type),className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",children:r.jsx(j.Z,{className:"h-4 w-4"})})]})]})},`${e.id}-${e.type}`))})]},e.supplierId))})})]}),r.jsx(D.Vq,{open:ei,onOpenChange:el,children:(0,r.jsxs)(D.cZ,{className:"max-w-2xl",children:[(0,r.jsxs)(D.fK,{children:[r.jsx(D.$N,{children:"確認建立採購單"}),r.jsx(D.Be,{children:"請確認以下項目將建立採購單"})]}),r.jsx("div",{className:"max-h-60 overflow-y-auto space-y-3",children:(()=>{let e=(0===et.size?Q:Q.filter(e=>et.has(`${e.id}-${e.type}`))).reduce((e,t)=>(e[t.supplierId]||(e[t.supplierId]={supplierName:t.supplierName,items:[]}),e[t.supplierId].items.push(t),e),{});return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["將建立 ",r.jsx("span",{className:"font-semibold text-amber-600",children:Object.keys(e).length})," 張採購單"]}),Object.entries(e).map(([e,t])=>(0,r.jsxs)("div",{className:"border border-amber-200 rounded-lg overflow-hidden",children:[r.jsx("div",{className:"bg-amber-50 px-3 py-2 border-b border-amber-200",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(u.Z,{className:"h-4 w-4 text-blue-600"}),r.jsx("span",{className:"font-medium text-amber-800",children:t.supplierName}),(0,r.jsxs)("span",{className:"text-sm text-amber-600",children:["(",t.items.length," 項)"]})]})}),r.jsx("div",{className:"divide-y divide-amber-100",children:t.items.map(e=>r.jsx("div",{className:"p-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-6 h-6 rounded-lg flex items-center justify-center ${"material"===e.type?"bg-blue-100 text-blue-600":"bg-pink-100 text-pink-600"}`,children:"material"===e.type?r.jsx(v.Z,{className:"h-3 w-3"}):r.jsx(y.Z,{className:"h-3 w-3"})}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.code," • NT$ ",e.costPerUnit.toLocaleString(),"/",e.unit]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"font-medium text-gray-900",children:[e.quantity," ",e.unit]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["NT$ ",(e.costPerUnit*e.quantity).toLocaleString()]})]})]})},`${e.id}-${e.type}`))})]},e))]})})()}),(0,r.jsxs)(D.cN,{children:[r.jsx(k.z,{variant:"outline",onClick:()=>el(!1),disabled:er,children:"取消"}),r.jsx(k.z,{onClick:eb,disabled:er,className:"bg-amber-600 hover:bg-amber-700 text-white",children:er?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"建立中..."]}):"確認建立採購單"})]})]})})]})}function $(){return r.jsx(S,{})}},29752:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>l,SZ:()=>d,Zb:()=>i,aY:()=>c,eW:()=>o,ll:()=>n});var r=s(10326);s(17577);var a=s(51223);function i({className:e,...t}){return r.jsx("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-lg border-2 p-6 shadow-md",e),...t})}function l({className:e,...t}){return r.jsx("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 has-data-[slot=card-action]:grid-cols-[1fr_auto]",e),...t})}function n({className:e,...t}){return r.jsx("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...t})}function d({className:e,...t}){return r.jsx("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...t})}function c({className:e,...t}){return r.jsx("div",{"data-slot":"card-content",className:(0,a.cn)("",e),...t})}function o({className:e,...t}){return r.jsx("div",{"data-slot":"card-footer",className:(0,a.cn)("flex items-center",e),...t})}},9280:(e,t,s)=>{"use strict";s.d(t,{X:()=>n});var r=s(10326);s(17577);var a=s(13635),i=s(32933),l=s(51223);function n({className:e,...t}){return r.jsx(a.fC,{"data-slot":"checkbox",className:(0,l.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:r.jsx(a.z$,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:r.jsx(i.Z,{className:"size-3.5"})})})}},24118:(e,t,s)=>{"use strict";s.d(t,{$N:()=>x,Be:()=>h,Vq:()=>d,cN:()=>p,cZ:()=>m,fK:()=>u});var r=s(10326),a=s(17577),i=s(98958),l=s(94019),n=s(51223);let d=i.fC;i.xz;let c=i.h_;i.x8;let o=a.forwardRef(({className:e,...t},s)=>r.jsx(i.aV,{ref:s,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));o.displayName=i.aV.displayName;let m=a.forwardRef(({className:e,children:t,...s},a)=>(0,r.jsxs)(c,{children:[r.jsx(o,{}),(0,r.jsxs)(i.VY,{ref:a,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-2xl translate-x-[-50%] translate-y-[-50%] gap-4 border-2 border-border bg-background shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg max-h-[90vh] overflow-y-auto","p-4 sm:p-6 mx-2 sm:mx-0","max-w-[calc(100vw-1rem)] sm:max-w-lg md:max-w-xl lg:max-w-2xl","max-h-[95vh] sm:max-h-[90vh]",e),...s,children:[t,(0,r.jsxs)(i.x8,{className:"absolute right-3 top-3 sm:right-4 sm:top-4 z-10 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground p-1",children:[r.jsx(l.Z,{className:"h-5 w-5 sm:h-4 sm:w-4"}),r.jsx("span",{className:"sr-only",children:"關閉"})]})]})]}));m.displayName=i.VY.displayName;let u=({className:e,...t})=>r.jsx("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left pb-4 border-b border-border",e),...t});u.displayName="DialogHeader";let p=({className:e,...t})=>r.jsx("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end gap-2 sm:gap-0 sm:space-x-2 pt-4 border-t border-border","[&>*]:w-full sm:[&>*]:w-auto",e),...t});p.displayName="DialogFooter";let x=a.forwardRef(({className:e,...t},s)=>r.jsx(i.Dx,{ref:s,className:(0,n.cn)("text-xl sm:text-2xl font-bold flex items-center gap-2 sm:gap-3 leading-tight",e),...t}));x.displayName=i.Dx.displayName;let h=a.forwardRef(({className:e,...t},s)=>r.jsx(i.dk,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));h.displayName=i.dk.displayName},41190:(e,t,s)=>{"use strict";s.d(t,{I:()=>l});var r=s(10326),a=s(17577),i=s(51223);let l=a.forwardRef(({className:e,type:t,...s},a)=>r.jsx("input",{type:t,className:(0,i.cn)("flex w-full rounded-md border border-slate-200 bg-white px-3 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-800 dark:bg-slate-950 dark:ring-offset-slate-950 dark:placeholder:text-slate-400 dark:focus-visible:ring-slate-300","h-11 sm:h-10 py-3 sm:py-2","text-base sm:text-sm","min-h-[44px]",e),ref:a,...s}));l.displayName="Input"},41156:(e,t,s)=>{"use strict";s.d(t,{RM:()=>n,SC:()=>d,iA:()=>i,pj:()=>o,ss:()=>c,xD:()=>l});var r=s(10326);s(17577);var a=s(51223);function i({className:e,...t}){return r.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:r.jsx("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...t})})}function l({className:e,...t}){return r.jsx("thead",{"data-slot":"table-header",className:(0,a.cn)("",e),...t})}function n({className:e,...t}){return r.jsx("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...t})}function d({className:e,...t}){return r.jsx("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b border-border transition-colors",e),...t})}function c({className:e,...t}){return r.jsx("th",{"data-slot":"table-head",className:(0,a.cn)("bg-muted text-foreground font-semibold border-b border-border p-3 text-left align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function o({className:e,...t}){return r.jsx("td",{"data-slot":"table-cell",className:(0,a.cn)("p-3 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}},69250:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`D:\APP\deer-lab\src\app\dashboard\purchase-orders\page.tsx#default`)},13635:(e,t,s)=>{"use strict";s.d(t,{fC:()=>y,z$:()=>w});var r=s(17577),a=s(48051),i=s(93095),l=s(82561),n=s(52067),d=s(53405),c=s(2566),o=s(9815),m=s(45226),u=s(10326),p="Checkbox",[x,h]=(0,i.b)(p),[b,f]=x(p);function g(e){let{__scopeCheckbox:t,checked:s,children:a,defaultChecked:i,disabled:l,form:d,name:c,onCheckedChange:o,required:m,value:x="on",internal_do_not_use_render:h}=e,[f,g]=(0,n.T)({prop:s,defaultProp:i??!1,onChange:o,caller:p}),[j,v]=r.useState(null),[y,N]=r.useState(null),w=r.useRef(!1),k=!j||!!d||!!j.closest("form"),C={checked:f,disabled:l,setChecked:g,control:j,setControl:v,name:c,form:d,value:x,hasConsumerStoppedPropagationRef:w,required:m,defaultChecked:!Z(i)&&i,isFormControl:k,bubbleInput:y,setBubbleInput:N};return(0,u.jsx)(b,{scope:t,...C,children:"function"==typeof h?h(C):a})}var j="CheckboxTrigger",v=r.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:s,...i},n)=>{let{control:d,value:c,disabled:o,checked:p,required:x,setControl:h,setChecked:b,hasConsumerStoppedPropagationRef:g,isFormControl:v,bubbleInput:y}=f(j,e),N=(0,a.e)(n,h),w=r.useRef(p);return r.useEffect(()=>{let e=d?.form;if(e){let t=()=>b(w.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[d,b]),(0,u.jsx)(m.WV.button,{type:"button",role:"checkbox","aria-checked":Z(p)?"mixed":p,"aria-required":x,"data-state":P(p),"data-disabled":o?"":void 0,disabled:o,value:c,...i,ref:N,onKeyDown:(0,l.Mj)(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,l.Mj)(s,e=>{b(e=>!!Z(e)||!e),y&&v&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})})});v.displayName=j;var y=r.forwardRef((e,t)=>{let{__scopeCheckbox:s,name:r,checked:a,defaultChecked:i,required:l,disabled:n,value:d,onCheckedChange:c,form:o,...m}=e;return(0,u.jsx)(g,{__scopeCheckbox:s,checked:a,defaultChecked:i,disabled:n,required:l,onCheckedChange:c,name:r,form:o,value:d,internal_do_not_use_render:({isFormControl:e})=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(v,{...m,ref:t,__scopeCheckbox:s}),e&&(0,u.jsx)(C,{__scopeCheckbox:s})]})})});y.displayName=p;var N="CheckboxIndicator",w=r.forwardRef((e,t)=>{let{__scopeCheckbox:s,forceMount:r,...a}=e,i=f(N,s);return(0,u.jsx)(o.z,{present:r||Z(i.checked)||!0===i.checked,children:(0,u.jsx)(m.WV.span,{"data-state":P(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});w.displayName=N;var k="CheckboxBubbleInput",C=r.forwardRef(({__scopeCheckbox:e,...t},s)=>{let{control:i,hasConsumerStoppedPropagationRef:l,checked:n,defaultChecked:o,required:p,disabled:x,name:h,value:b,form:g,bubbleInput:j,setBubbleInput:v}=f(k,e),y=(0,a.e)(s,v),N=(0,d.D)(n),w=(0,c.t)(i);r.useEffect(()=>{if(!j)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!l.current;if(N!==n&&e){let s=new Event("click",{bubbles:t});j.indeterminate=Z(n),e.call(j,!Z(n)&&n),j.dispatchEvent(s)}},[j,N,n,l]);let C=r.useRef(!Z(n)&&n);return(0,u.jsx)(m.WV.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??C.current,required:p,disabled:x,name:h,value:b,form:g,...t,tabIndex:-1,ref:y,style:{...t.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function Z(e){return"indeterminate"===e}function P(e){return Z(e)?"indeterminate":e?"checked":"unchecked"}C.displayName=k},98958:(e,t,s)=>{"use strict";s.d(t,{Dx:()=>er,VY:()=>es,aV:()=>et,dk:()=>ea,fC:()=>J,h_:()=>ee,jm:()=>X,p8:()=>y,x8:()=>ei,xz:()=>Q});var r=s(17577),a=s(82561),i=s(48051),l=s(93095),n=s(88957),d=s(52067),c=s(825),o=s(10441),m=s(83078),u=s(9815),p=s(45226),x=s(80699),h=s(58260),b=s(35664),f=s(34214),g=s(10326),j="Dialog",[v,y]=(0,l.b)(j),[N,w]=v(j),k=e=>{let{__scopeDialog:t,children:s,open:a,defaultOpen:i,onOpenChange:l,modal:c=!0}=e,o=r.useRef(null),m=r.useRef(null),[u,p]=(0,d.T)({prop:a,defaultProp:i??!1,onChange:l,caller:j});return(0,g.jsx)(N,{scope:t,triggerRef:o,contentRef:m,contentId:(0,n.M)(),titleId:(0,n.M)(),descriptionId:(0,n.M)(),open:u,onOpenChange:p,onOpenToggle:r.useCallback(()=>p(e=>!e),[p]),modal:c,children:s})};k.displayName=j;var C="DialogTrigger",Z=r.forwardRef((e,t)=>{let{__scopeDialog:s,...r}=e,l=w(C,s),n=(0,i.e)(t,l.triggerRef);return(0,g.jsx)(p.WV.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":B(l.open),...r,ref:n,onClick:(0,a.Mj)(e.onClick,l.onOpenToggle)})});Z.displayName=C;var P="DialogPortal",[z,D]=v(P,{forceMount:void 0}),S=e=>{let{__scopeDialog:t,forceMount:s,children:a,container:i}=e,l=w(P,t);return(0,g.jsx)(z,{scope:t,forceMount:s,children:r.Children.map(a,e=>(0,g.jsx)(u.z,{present:s||l.open,children:(0,g.jsx)(m.h,{asChild:!0,container:i,children:e})}))})};S.displayName=P;var $="DialogOverlay",I=r.forwardRef((e,t)=>{let s=D($,e.__scopeDialog),{forceMount:r=s.forceMount,...a}=e,i=w($,e.__scopeDialog);return i.modal?(0,g.jsx)(u.z,{present:r||i.open,children:(0,g.jsx)(M,{...a,ref:t})}):null});I.displayName=$;var R=(0,f.Z8)("DialogOverlay.RemoveScroll"),M=r.forwardRef((e,t)=>{let{__scopeDialog:s,...r}=e,a=w($,s);return(0,g.jsx)(h.Z,{as:R,allowPinchZoom:!0,shards:[a.contentRef],children:(0,g.jsx)(p.WV.div,{"data-state":B(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),q="DialogContent",A=r.forwardRef((e,t)=>{let s=D(q,e.__scopeDialog),{forceMount:r=s.forceMount,...a}=e,i=w(q,e.__scopeDialog);return(0,g.jsx)(u.z,{present:r||i.open,children:i.modal?(0,g.jsx)(E,{...a,ref:t}):(0,g.jsx)(_,{...a,ref:t})})});A.displayName=q;var E=r.forwardRef((e,t)=>{let s=w(q,e.__scopeDialog),l=r.useRef(null),n=(0,i.e)(t,s.contentRef,l);return r.useEffect(()=>{let e=l.current;if(e)return(0,b.Ry)(e)},[]),(0,g.jsx)(O,{...e,ref:n,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,a.Mj)(e.onCloseAutoFocus,e=>{e.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:(0,a.Mj)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey;(2===t.button||s)&&e.preventDefault()}),onFocusOutside:(0,a.Mj)(e.onFocusOutside,e=>e.preventDefault())})}),_=r.forwardRef((e,t)=>{let s=w(q,e.__scopeDialog),a=r.useRef(!1),i=r.useRef(!1);return(0,g.jsx)(O,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(a.current||s.triggerRef.current?.focus(),t.preventDefault()),a.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(a.current=!0,"pointerdown"!==t.detail.originalEvent.type||(i.current=!0));let r=t.target;s.triggerRef.current?.contains(r)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),O=r.forwardRef((e,t)=>{let{__scopeDialog:s,trapFocus:a,onOpenAutoFocus:l,onCloseAutoFocus:n,...d}=e,m=w(q,s),u=r.useRef(null),p=(0,i.e)(t,u);return(0,x.EW)(),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o.M,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:l,onUnmountAutoFocus:n,children:(0,g.jsx)(c.XB,{role:"dialog",id:m.contentId,"aria-describedby":m.descriptionId,"aria-labelledby":m.titleId,"data-state":B(m.open),...d,ref:p,onDismiss:()=>m.onOpenChange(!1)})}),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(K,{titleId:m.titleId}),(0,g.jsx)(H,{contentRef:u,descriptionId:m.descriptionId})]})]})}),F="DialogTitle",L=r.forwardRef((e,t)=>{let{__scopeDialog:s,...r}=e,a=w(F,s);return(0,g.jsx)(p.WV.h2,{id:a.titleId,...r,ref:t})});L.displayName=F;var T="DialogDescription",V=r.forwardRef((e,t)=>{let{__scopeDialog:s,...r}=e,a=w(T,s);return(0,g.jsx)(p.WV.p,{id:a.descriptionId,...r,ref:t})});V.displayName=T;var W="DialogClose",U=r.forwardRef((e,t)=>{let{__scopeDialog:s,...r}=e,i=w(W,s);return(0,g.jsx)(p.WV.button,{type:"button",...r,ref:t,onClick:(0,a.Mj)(e.onClick,()=>i.onOpenChange(!1))})});function B(e){return e?"open":"closed"}U.displayName=W;var G="DialogTitleWarning",[X,Y]=(0,l.k)(G,{contentName:q,titleName:F,docsSlug:"dialog"}),K=({titleId:e})=>{let t=Y(G),s=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return r.useEffect(()=>{e&&!document.getElementById(e)&&console.error(s)},[s,e]),null},H=({contentRef:e,descriptionId:t})=>{let s=Y("DialogDescriptionWarning"),a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${s.contentName}}.`;return r.useEffect(()=>{let s=e.current?.getAttribute("aria-describedby");t&&s&&!document.getElementById(t)&&console.warn(a)},[a,e,t]),null},J=k,Q=Z,ee=S,et=I,es=A,er=L,ea=V,ei=U},53405:(e,t,s)=>{"use strict";s.d(t,{D:()=>a});var r=s(17577);function a(e){let t=r.useRef({value:e,previous:e});return r.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[8948,9654,5540,8693,4108,4334],()=>s(49024));module.exports=r})();