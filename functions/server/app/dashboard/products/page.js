(()=>{var e={};e.id=95,e.ids=[95],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},76047:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>c}),r(52923),r(22834),r(62510),r(35866);var t=r(23191),a=r(88716),l=r(37922),i=r.n(l),n=r(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);r.d(s,d);let c=["",{children:["dashboard",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,52923)),"D:\\APP\\deer-lab\\src\\app\\dashboard\\products\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,22834)),"D:\\APP\\deer-lab\\src\\app\\dashboard\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,62510)),"D:\\APP\\deer-lab\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["D:\\APP\\deer-lab\\src\\app\\dashboard\\products\\page.tsx"],x="/dashboard/products/page",m={require:r,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/products/page",pathname:"/dashboard/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},82433:(e,s,r)=>{Promise.resolve().then(r.bind(r,83153))},83153:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>O});var t=r(10326),a=r(17577),l=r(35047),i=r(76),n=r(78880),d=r(90445),c=r(48705);let o=(0,r(62881).Z)("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);var x=r(99102),m=r(83855),h=r(88307),u=r(15919),p=r(12714),g=r(69508),j=r(40765),f=r(85999),b=r(41156),N=r(91664),v=r(10143),w=r(38443),y=r(9280),C=r(41190),k=r(29752),S=r(88012),P=r(13898),q=r(74723),Z=r(74064),z=r(770),A=r(24118),$=r(9969),M=r(29280),I=r(82015);let _=z.Ry({newFragranceId:z.Z_({required_error:"必須選擇一個新的香精"}),reason:z.Z_().min(5,{message:"更換原因至少需要 5 個字元"})});function D({isOpen:e,onOpenChange:s,onUpdate:r,productData:l,currentFragranceName:i}){let[d,c]=(0,a.useState)(!1),[o,x]=(0,a.useState)([]),[m,u]=(0,a.useState)([]),[p,g]=(0,a.useState)(""),[j,b]=(0,a.useState)(!1),v=(0,q.cI)({resolver:(0,Z.F)(_),defaultValues:{newFragranceId:void 0,reason:""}});async function w(e){if(!l)return;c(!0);let t=f.Am.loading("正在更換香精...");try{let a=(0,n.$C)(),i=(0,n.V1)(a,"changeProductFragrance");await i({productId:l.id,newFragranceId:e.newFragranceId,reason:e.reason}),f.Am.success(`產品 ${l.name} 的香精已成功更換。`,{id:t}),r(),s(!1)}catch(s){let e=s instanceof Error?s.message:"發生未知錯誤。";f.Am.error(e,{id:t})}finally{c(!1)}}return t.jsx(A.Vq,{open:e,onOpenChange:s,children:(0,t.jsxs)(A.cZ,{className:"sm:max-w-md bg-white dark:bg-slate-900","aria-describedby":"fragrance-change-dialog-description",children:[(0,t.jsxs)(A.fK,{children:[t.jsx(A.$N,{children:"更換產品香精"}),(0,t.jsxs)(A.Be,{id:"fragrance-change-dialog-description",children:["為產品「",l?.name,"」更換新的香精。此操作將會被記錄。"]})]}),(0,t.jsxs)("div",{className:"py-2",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"目前香精"}),t.jsx("p",{className:"font-semibold",children:i})]}),t.jsx($.l0,{...v,children:(0,t.jsxs)("form",{onSubmit:v.handleSubmit(w),className:"space-y-4",children:[t.jsx($.Wi,{control:v.control,name:"newFragranceId",render:({field:e})=>(0,t.jsxs)($.xJ,{children:[t.jsx($.lX,{children:"選擇新香精"}),(0,t.jsxs)(M.Ph,{onValueChange:s=>{e.onChange(s),b(!1)},defaultValue:e.value,open:j,onOpenChange:b,children:[t.jsx($.NI,{children:t.jsx(M.i4,{children:t.jsx(M.ki,{placeholder:"從可用的香精中選擇..."})})}),(0,t.jsxs)(M.Bw,{children:[(0,t.jsxs)("div",{className:"flex items-center px-3 py-2 border-b",children:[t.jsx(h.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),t.jsx(C.I,{placeholder:"搜尋香精...",value:p,onChange:e=>g(e.target.value),className:"border-0 focus-visible:ring-0 focus-visible:ring-offset-0"})]}),o.map(e=>t.jsx(M.Ql,{value:e.value,children:e.label},e.value))]})]}),t.jsx($.zG,{})]})}),t.jsx($.Wi,{control:v.control,name:"reason",render:({field:e})=>(0,t.jsxs)($.xJ,{children:[t.jsx($.lX,{children:"更換原因"}),t.jsx($.NI,{children:t.jsx(I.g,{placeholder:"請詳細說明更換原因，例如：配方升級、舊版停產等...",className:"resize-none",...e})}),t.jsx($.zG,{})]})}),t.jsx(N.z,{type:"submit",disabled:d,className:"w-full mt-4",children:d?"處理中...":"確認更換"})]})})]})})}var E=r(25889);function F(){let e=(0,l.useRouter)();(0,l.useSearchParams)();let[s,r]=(0,a.useState)([]),[q,Z]=(0,a.useState)(!0),[z,A]=(0,a.useState)(!1),[$,M]=(0,a.useState)(!1),[I,_]=(0,a.useState)(!1),[F,O]=(0,a.useState)(!1),[V,X]=(0,a.useState)(null),[G,R]=(0,a.useState)(!1),[W,J]=(0,a.useState)(null),[Q,B]=(0,a.useState)(new Set),[L,U]=(0,a.useState)(!1),[K,T]=(0,a.useState)(""),[Y,H]=(0,a.useState)([]),[ee,es]=(0,a.useState)(new Set),[er,et]=(0,a.useState)(new Set),ea=(0,a.useCallback)(async()=>{Z(!0);try{if(!d.db)throw Error("Firebase 未初始化");let e=new Map,s=new Map;(await (0,i.getDocs)((0,i.collection)(d.db,"productSeries"))).forEach(s=>e.set(s.id,s.data().name)),(await (0,i.getDocs)((0,i.collection)(d.db,"fragrances"))).forEach(e=>{let r=e.data();s.set(e.id,{name:r.name||"未知香精",code:r.code||""})});let t=(await (0,i.getDocs)((0,i.collection)(d.db,"products"))).docs.map(r=>{let t=r.data(),a=s.get(t.currentFragranceRef?.id);return{...t,id:r.id,seriesName:e.get(t.seriesRef?.id)||"未知系列",fragranceName:a?.name||"未知香精",fragranceCode:a?.code||""}}).sort((e,s)=>{let r=(e.seriesName||"").localeCompare(s.seriesName||"");return 0!==r?r:(e.name||"").localeCompare(s.name||"")});r(t),H(t)}catch(e){console.error("讀取產品資料失敗:",e),f.Am.error("讀取產品資料失敗。")}finally{Z(!1)}},[]),el=()=>{J(null),A(!0)},ei=e=>{J(e),A(!0)},en=e=>{J(e),M(!0)},ed=s=>{e.push(`/dashboard/products/${s.id}`)},ec=()=>{e.push("/dashboard/product-series")},eo=(e,s)=>{let r=new Set(Q);s?r.add(e):r.delete(e),B(r)},ex=async()=>{if(!W)return;let e=f.Am.loading("正在刪除產品...");try{let s=(0,n.$C)(),r=(0,n.V1)(s,"deleteProduct");await r({productId:W.id}),f.Am.success(`產品 ${W.name} 已成功刪除。`,{id:e}),ea()}catch(r){console.error("刪除產品失敗:",r);let s="刪除產品時發生錯誤。";r instanceof Error&&(s=r.message),f.Am.error(s,{id:e})}finally{M(!1),J(null)}},em=async()=>{if(0===Q.size)return;let e=f.Am.loading(`正在刪除 ${Q.size} 個產品...`);try{let s=(0,n.$C)(),r=(0,n.V1)(s,"deleteProduct"),t=Array.from(Q).map(e=>r({productId:e}));await Promise.all(t),f.Am.success(`已成功刪除 ${Q.size} 個產品。`,{id:e}),B(new Set),ea()}catch(r){console.error("批次刪除產品失敗:",r);let s="批次刪除產品時發生錯誤。";r instanceof Error&&(s=r.message),f.Am.error(s,{id:e})}finally{U(!1)}},eh=async(e,s,r)=>{if(!d.db)throw Error("Firebase 未初始化");let t=(0,n.$C)(),a=(0,n.V1)(t,"createProduct"),l=(0,n.V1)(t,"updateProduct"),c=0,o=e.length,x={success:0,failed:0,failedItems:[]};for(let t of e)try{let e=null;if(t.seriesName){let s=(0,i.query)((0,i.collection)(d.db,"productSeries"),(0,i.where)("name","==",t.seriesName)),r=await (0,i.getDocs)(s);if(r.empty)throw Error(`系列名稱 "${t.seriesName}" 不存在於系統中`);e=r.docs[0].id}let n=null;if(t.fragranceCode){let e=(0,i.query)((0,i.collection)(d.db,"fragrances"),(0,i.where)("code","==",t.fragranceCode)),s=await (0,i.getDocs)(e);if(s.empty)throw Error(`香精編號 "${t.fragranceCode}" 不存在於系統中`);n=s.docs[0].id}let m=null;if(t.code&&""!==t.code.trim()){let e=(0,i.query)((0,i.collection)(d.db,"products"),(0,i.where)("code","==",t.code)),s=await (0,i.getDocs)(e);s.empty||(m=s.docs[0].id)}let h={name:t.name,seriesId:e,fragranceId:n,nicotineMg:t.nicotineMg||0,specificMaterialIds:t.specificMaterialIds||[],status:t.status||"啟用"};t.code&&""!==t.code.trim()&&(h.code=t.code),m&&s?.updateMode?await l({productId:m,...h}):m?console.warn(`產品代號 "${t.code}" 已存在，跳過創建`):await a(h),x.success++,c++,r&&r(c,o)}catch(a){console.error("匯入產品失敗:",a);let e=a instanceof Error?a.message:"未知錯誤";if(x.failed++,x.failedItems.push({item:t,error:e,row:c+1}),!s?.updateMode)throw Error(`匯入產品 "${t.name}" 失敗: ${e}`);c++,r&&r(c,o)}if(x.failed>0){let e=Error(`匯入完成，成功 ${x.success} 筆，失敗 ${x.failed} 筆`);throw e.results=x,e}ea()},eu=async()=>s.map(e=>({name:e.name,code:e.code,seriesName:e.seriesName,fragranceCode:e.fragranceCode,nicotineMg:e.nicotineMg,status:e.status||"啟用"}));return(0,t.jsxs)("div",{className:"container mx-auto py-10",children:[t.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-indigo-600 bg-clip-text text-transparent",children:"產品管理"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"管理產品資訊與系列配置"})]})}),(0,t.jsxs)("div",{className:"lg:hidden mb-6",children:[Q.size>0&&t.jsx("div",{className:"mb-3",children:(0,t.jsxs)(N.z,{variant:"destructive",onClick:()=>U(!0),className:"w-full bg-red-600 hover:bg-red-700 text-white",children:[t.jsx(c.Z,{className:"mr-2 h-4 w-4"}),"批次刪除 (",Q.size," 個產品)"]})}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,t.jsxs)(N.z,{variant:"outline",onClick:ec,className:"border-purple-200 text-purple-600 hover:bg-purple-100 hover:border-purple-300 hover:shadow-sm transition-all duration-200",children:[t.jsx(o,{className:"mr-2 h-4 w-4"}),"系列管理"]}),(0,t.jsxs)(N.z,{variant:"outline",onClick:()=>O(!0),className:"w-full",children:[t.jsx(x.Z,{className:"mr-2 h-4 w-4"}),"匯入/匯出"]}),(0,t.jsxs)(N.z,{onClick:el,className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white shadow-lg hover:shadow-xl transition-all duration-200",children:[t.jsx(m.Z,{className:"mr-2 h-4 w-4"}),"新增產品"]})]})]}),t.jsx("div",{className:"hidden lg:block mb-6",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 justify-end",children:[Q.size>0&&(0,t.jsxs)(N.z,{variant:"destructive",onClick:()=>U(!0),className:"bg-red-600 hover:bg-red-700 text-white",children:[t.jsx(c.Z,{className:"mr-2 h-4 w-4"}),"批次刪除 (",Q.size,")"]}),(0,t.jsxs)(N.z,{variant:"outline",onClick:ec,className:"border-purple-200 text-purple-600 hover:bg-purple-600 hover:text-white hover:border-purple-600 transition-all duration-200",children:[t.jsx(o,{className:"mr-2 h-4 w-4"}),"系列管理"]}),(0,t.jsxs)(N.z,{variant:"outline",onClick:()=>O(!0),children:[t.jsx(x.Z,{className:"mr-2 h-4 w-4"}),"匯入/匯出"]}),(0,t.jsxs)(N.z,{onClick:el,className:"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white shadow-lg hover:shadow-xl transition-all duration-200",children:[t.jsx(m.Z,{className:"mr-2 h-4 w-4"}),"新增產品"]})]})}),t.jsx(k.Zb,{className:"mb-6 border-0 shadow-lg bg-gradient-to-r from-gray-50 to-purple-50",children:t.jsx(k.aY,{className:"pt-6",children:(0,t.jsxs)("div",{className:"relative",children:[t.jsx(h.Z,{className:"absolute left-3 top-3 h-4 w-4 text-purple-600"}),t.jsx(C.I,{placeholder:"搜尋產品名稱、代號、系列或香精...",value:K,onChange:e=>T(e.target.value),className:"pl-10 border-purple-200 focus:border-purple-500 focus:ring-purple-500"})]})})}),t.jsx("div",{className:"mb-6",children:t.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(new Set(s.map(e=>e.seriesName))).map(e=>t.jsx(w.C,{variant:er.has(e||"")?"default":"secondary",className:`cursor-pointer transition-colors ${er.has(e||"")?"bg-purple-600 hover:bg-purple-700 text-white":"bg-purple-100 hover:bg-purple-200 text-purple-800 border-purple-300"}`,onClick:()=>{et(s=>{let r=new Set(s);return r.has(e||"")?r.delete(e||""):r.add(e||""),r})},children:e},e))})}),t.jsx("div",{className:"lg:hidden",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:[t.jsx("div",{className:"px-4 py-3 bg-gradient-to-r from-gray-50 to-purple-50 border-b border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(c.Z,{className:"h-4 w-4 text-purple-600"}),t.jsx("h2",{className:"text-base font-semibold text-gray-800",children:"產品清單"})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-600",children:["共 ",Y.length," 個"]})]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsx("div",{className:"min-w-full",children:q?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,t.jsxs)("div",{className:"relative",children:[t.jsx("div",{className:"w-10 h-10 border-4 border-purple-200 rounded-full animate-spin"}),t.jsx("div",{className:"absolute top-0 left-0 w-10 h-10 border-4 border-transparent border-t-purple-600 rounded-full animate-spin"})]}),t.jsx("span",{className:"mt-3 text-sm text-gray-600 font-medium",children:"載入中..."})]}):Y.length>0?t.jsx("div",{className:"divide-y divide-gray-200",children:Y.map(e=>(0,t.jsxs)("div",{className:"p-4 hover:bg-purple-100/60 transition-all duration-200 border border-transparent hover:border-purple-200 hover:shadow-sm rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer flex-1",onClick:()=>ed(e),children:[t.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-lg flex items-center justify-center",children:t.jsx(c.Z,{className:"h-4 w-4 text-white"})}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium text-gray-900 text-sm",children:e.name}),t.jsx("div",{className:"text-xs text-green-600 font-medium",children:e.code})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(y.X,{checked:Q.has(e.id),onCheckedChange:s=>eo(e.id,s)}),(0,t.jsxs)(v.h_,{children:[t.jsx(v.$F,{asChild:!0,children:t.jsx(N.z,{variant:"ghost",className:"h-8 w-8 p-0",children:t.jsx(u.Z,{className:"h-4 w-4"})})}),(0,t.jsxs)(v.AW,{align:"end",children:[(0,t.jsxs)(v.Xi,{onClick:()=>ed(e),children:[t.jsx(p.Z,{className:"mr-2 h-4 w-4"}),"查看詳細"]}),(0,t.jsxs)(v.Xi,{onClick:()=>ei(e),children:[t.jsx(g.Z,{className:"mr-2 h-4 w-4"}),"編輯產品"]}),t.jsx(v.VD,{}),(0,t.jsxs)(v.Xi,{onClick:()=>en(e),className:"text-red-600",children:[t.jsx(c.Z,{className:"h-4 w-4 mr-2"}),"刪除產品"]})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-3 text-sm cursor-pointer",onClick:()=>ed(e),children:[(0,t.jsxs)("div",{children:[t.jsx("div",{className:"flex items-center gap-1 mb-1",children:t.jsx("span",{className:"text-gray-500",children:"系列"})}),t.jsx("span",{className:"text-sm text-gray-700",children:e.seriesName})]}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"flex items-center gap-1 mb-1",children:t.jsx("span",{className:"text-gray-500",children:"使用香精"})}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-sm text-green-600",children:e.fragranceCode||"未指定"}),t.jsx("div",{className:"text-xs text-gray-500",children:e.fragranceName})]})]}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"flex items-center gap-1 mb-1",children:t.jsx("span",{className:"text-gray-500",children:"丁鹽濃度"})}),(0,t.jsxs)("span",{className:"text-sm text-gray-700",children:[e.nicotineMg||0," MG"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[t.jsx(j.Z,{className:"h-3 w-3 text-muted-foreground"}),t.jsx("span",{className:"text-muted-foreground",children:"狀態"})]}),t.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${"備用"===e.status?"bg-yellow-100 text-yellow-800":"棄用"===e.status?"bg-pink-100 text-pink-800":"bg-green-100 text-green-800"}`,children:e.status||"啟用"})]})]})]},e.id))}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[t.jsx("div",{className:"w-12 h-12 bg-muted rounded-full flex items-center justify-center mb-3",children:t.jsx(c.Z,{className:"h-6 w-6 text-muted-foreground"})}),t.jsx("h3",{className:"text-base font-medium text-foreground mb-1",children:"沒有產品資料"}),t.jsx("p",{className:"text-sm text-muted-foreground mb-4 text-center",children:"開始建立第一個產品來管理產品資訊"}),(0,t.jsxs)(N.z,{onClick:el,variant:"outline",size:"sm",className:"border-purple-200 text-purple-600 hover:bg-purple-50",children:[t.jsx(m.Z,{className:"mr-2 h-4 w-4"}),"新增產品"]})]})})})]})}),t.jsx("div",{className:"hidden lg:block",children:(0,t.jsxs)("div",{className:"bg-card rounded-xl shadow-lg border border-border overflow-hidden",children:[t.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-background to-purple-50 border-b border-border",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(c.Z,{className:"h-5 w-5 text-purple-600"}),t.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"產品清單"})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["共 ",Y.length," 個產品"]})]})}),t.jsx("div",{className:"table-responsive",children:(0,t.jsxs)(b.iA,{className:"table-enhanced",children:[t.jsx(b.xD,{children:(0,t.jsxs)(b.SC,{children:[t.jsx(b.ss,{className:"w-[60px] text-center",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",title:"全選所有產品",children:[t.jsx(y.X,{checked:Q.size===Y.length&&Y.length>0,onCheckedChange:e=>{e?B(new Set(Y.map(e=>e.id))):B(new Set)}}),t.jsx("span",{className:"text-xs text-muted-foreground",children:"全選"})]})}),t.jsx(b.ss,{className:"text-left",children:"產品資訊"}),t.jsx(b.ss,{className:"text-left",children:"系列"}),t.jsx(b.ss,{className:"text-left",children:"使用香精"}),t.jsx(b.ss,{className:"text-left",children:"丁鹽濃度"}),t.jsx(b.ss,{className:"text-left",children:"狀態"}),t.jsx(b.ss,{className:"text-right",children:"操作"})]})}),t.jsx(b.RM,{children:q?t.jsx(b.SC,{children:t.jsx(b.pj,{colSpan:7,className:"text-center py-16",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,t.jsxs)("div",{className:"relative",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-purple-200 rounded-full animate-spin"}),t.jsx("div",{className:"absolute top-0 left-0 w-12 h-12 border-4 border-transparent border-t-purple-600 rounded-full animate-spin"})]}),t.jsx("span",{className:"mt-4 text-muted-foreground font-medium",children:"載入產品資料中..."})]})})}):Y.length>0?Y.map(e=>(0,t.jsxs)(b.SC,{className:"hover:bg-purple-200/70 hover:shadow-md transition-all duration-200 cursor-pointer",onClick:()=>ed(e),children:[t.jsx(b.pj,{className:"text-center",onClick:e=>e.stopPropagation(),children:t.jsx(y.X,{checked:Q.has(e.id),onCheckedChange:s=>eo(e.id,s)})}),t.jsx(b.pj,{children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-lg flex items-center justify-center",children:t.jsx(c.Z,{className:"h-5 w-5 text-white"})}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-semibold text-foreground",children:e.name}),t.jsx("div",{className:"text-xs text-green-600 font-medium",children:e.code})]})]})}),t.jsx(b.pj,{children:t.jsx("span",{className:"text-sm font-medium text-foreground",children:e.seriesName})}),t.jsx(b.pj,{children:(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-sm font-medium text-green-600",children:e.fragranceCode||"未指定"}),t.jsx("div",{className:"text-xs text-gray-500",children:e.fragranceName})]})}),t.jsx(b.pj,{children:(0,t.jsxs)("span",{className:"text-sm font-medium text-foreground",children:[e.nicotineMg||0," MG"]})}),t.jsx(b.pj,{children:t.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${"備用"===e.status?"bg-yellow-100 text-yellow-800":"棄用"===e.status?"bg-pink-100 text-pink-800":"bg-green-100 text-green-800"}`,children:e.status||"啟用"})}),t.jsx(b.pj,{className:"text-right",onClick:e=>e.stopPropagation(),children:(0,t.jsxs)(v.h_,{children:[t.jsx(v.$F,{asChild:!0,children:(0,t.jsxs)(N.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[t.jsx("span",{className:"sr-only",children:"開啟選單"}),t.jsx(u.Z,{className:"h-4 w-4"})]})}),(0,t.jsxs)(v.AW,{align:"end",children:[t.jsx(v.Ju,{children:"操作"}),t.jsx(v.VD,{}),(0,t.jsxs)(v.Xi,{onClick:()=>ed(e),children:[t.jsx(p.Z,{className:"h-4 w-4 mr-2"}),"查看詳細"]}),(0,t.jsxs)(v.Xi,{onClick:()=>ei(e),children:[t.jsx(g.Z,{className:"h-4 w-4 mr-2"}),"編輯產品"]}),t.jsx(v.VD,{}),t.jsx(v.Xi,{onClick:()=>en(e),className:"text-red-600 focus:text-red-600",children:"刪除產品"})]})]})})]},e.id)):t.jsx(b.SC,{children:t.jsx(b.pj,{colSpan:7,className:"text-center py-16",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[t.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mb-4",children:t.jsx(c.Z,{className:"h-8 w-8 text-muted-foreground"})}),t.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"沒有產品資料"}),t.jsx("p",{className:"text-muted-foreground mb-4",children:"開始建立第一個產品來管理產品資訊"}),(0,t.jsxs)(N.z,{onClick:el,variant:"outline",className:"border-purple-200 text-purple-600 hover:bg-purple-50",children:[t.jsx(m.Z,{className:"mr-2 h-4 w-4"}),"新增產品"]})]})})})})]})})]})}),t.jsx(S.u,{isOpen:z,onOpenChange:A,onProductUpdate:ea,productData:W}),W&&t.jsx(P.Q,{isOpen:$,onOpenChange:M,onConfirm:ex,title:`確認刪除產品`,description:`您確定要永久刪除產品「${W.name}」嗎？此操作無法復原。`}),t.jsx(P.Q,{isOpen:L,onOpenChange:U,onConfirm:em,title:`確認批次刪除`,description:`您確定要永久刪除選中的 ${Q.size} 個產品嗎？此操作無法復原。`}),t.jsx(D,{isOpen:I,onOpenChange:_,onUpdate:ea,productData:W,currentFragranceName:W?.fragranceName||""}),t.jsx(E.Z,{isOpen:F,onOpenChange:O,onImport:eh,onExport:eu,title:"產品資料",description:"匯入或匯出產品資料，支援 Excel 和 CSV 格式",sampleData:[{name:"示例產品",code:"",seriesName:"示例系列",fragranceCode:"FRAG001",nicotineMg:3,status:"啟用"}],fields:[{key:"name",label:"產品名稱",required:!0,type:"string"},{key:"code",label:"產品代號",required:!1,type:"string"},{key:"seriesName",label:"系列名稱",required:!0,type:"string"},{key:"fragranceCode",label:"香精編號",required:!0,type:"string"},{key:"nicotineMg",label:"尼古丁濃度",required:!1,type:"number"},{key:"status",label:"狀態",required:!1,type:"string"}]})]})}function O(){return t.jsx(a.Suspense,{fallback:t.jsx("div",{children:"Loading..."}),children:t.jsx(F,{})})}},52923:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(68570).createProxy)(String.raw`D:\APP\deer-lab\src\app\dashboard\products\page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[8948,9654,5540,8693,692,9516,3128,4108,4334,9536,8012],()=>r(76047));module.exports=t})();