{
  "permissions": {
    "allow": [
      "Bash(git log:*)",
      "Read(//e/PrtSrc/Screenshots/2025-09/**)",
      "Bash(copy firestore.indexes.json firestore.indexes.backup.json)",
      "Bash(npm run build:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\n🎨 優化產品管理頁面 - 繼承產品類型動態顏色系統\n\n- 擴充 ProductWithDetails 介面，新增 productType 欄位\n- 從 Firestore 動態載入產品類型顏色配置\n- 產品資訊欄位圖標使用產品類型漸層色\n- 產品代號文字顯示產品類型顏色\n- 新增產品類型欄位到欄位列表，顯示為彩色 Badge\n- 實現與系列管理頁面一致的視覺設計風格\n\n🤖 Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(xcopy:*)",
      "Bash(powershell:*)",
      "Bash(firebase deploy:*)",
      "Bash(git push)",
      "Bash(firebase functions:log:*)",
      "Bash(Select-String -Pattern \"Deploy complete\" -Context 5,5)",
      "Bash(timeout 180 bash:*)",
      "Bash(Select-String -Pattern \"Deploy complete\" -Context 2,2)",
      "Bash(git commit -m \"$(cat <<''EOF''\n✨ 實作通用工單系統 - 完整支援產品工單和通用工單雙軌模式\n\n## 核心功能實作\n\n### 1. 資料模型擴展\n- 擴展 WorkOrder 介面，新增 `orderType`、`workItem`、`workDescription` 欄位\n- 支援 ''product'' (產品工單) 和 ''general'' (通用工單) 兩種類型\n- productSnapshot 改為可選，保持向後相容性\n\n### 2. 工單列表頁面優化\n- 移除標題區域的「建立新工單」按鈕\n- 保留表格工具列的「建立新工單」按鈕\n- 新增「建立通用工單」按鈕，使用藍色漸層樣式\n- 列表顯示根據工單類型自動切換內容：\n  - 產品工單：顯示產品名稱和系列\n  - 通用工單：顯示工作項目和「通用工單」標籤\n\n### 3. 通用工單建立頁面\n- 建立新頁面 `/dashboard/work-orders/create-general/page.tsx`\n- 工單基本資料卡片包含：\n  - 工作項目（必填）\n  - 工作描述（必填，支援多行輸入）\n- 物料選擇系統：\n  - 支援從物料庫存和香精庫存中選擇\n  - 提供雙按鈕介面：「添加原料」和「添加香精」\n  - 可自由輸入使用數量\n  - 顯示當前庫存供參考\n- 工單編號自動生成：WO-G-YYYYMMDD-XXX (G 代表 General)\n\n### 4. 工單詳情頁面升級\n- 支援兩種工單類型的顯示：\n  - 產品工單：顯示產品資訊、系列、香精、尼古丁濃度\n  - 通用工單：顯示工作項目、工作描述，不顯示產品相關資訊\n- 「工單基本資料」卡片根據類型動態調整\n- 「工單詳細資料」卡片條件渲染產品專屬欄位\n- 通用工單標示：顯示「通用工單」藍色標籤\n\n### 5. 完整向後相容\n- 現有工單無 orderType 時預設為 ''product''\n- 所有現有產品工單功能完整保留\n- 工時申報系統完全相容兩種工單\n- 留言和圖片功能統一支援\n\n## 技術細節\n\n### 型別定義更新\n- `src/types/business.ts` - WorkOrder 介面擴展\n- `src/app/dashboard/work-orders/page.tsx` - WorkOrderColumn 介面擴展\n- `src/app/dashboard/work-orders/[id]/page.tsx` - WorkOrderData 介面擴展\n\n### UI 組件改進\n- 使用條件渲染確保產品工單和通用工單顯示正確\n- 通用工單使用藍色/紫色漸層主題區分\n- 產品工單維持原有的橙色/紅色主題\n\n### 資料處理邏輯\n- 工單載入時自動識別 orderType\n- 分頁載入同時支援兩種工單類型\n- 搜尋和篩選功能兼容所有工單\n\n## 系統架構優勢\n\n✅ 保留所有現有產品工單功能\n✅ 新增靈活的通用工單系統\n✅ 工時申報和統計系統完全相容\n✅ 留言和圖片功能統一\n✅ UI 簡潔，功能明確\n✅ 向後相容，零破壞性變更\n\n🤖 Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")"
    ],
    "deny": [],
    "ask": []
  }
}
