# Deer Lab éƒ¨ç½²å•é¡Œè§£æ±ºç¸½çµ

## ğŸ‰ å•é¡Œå·²è§£æ±ºï¼

æ‚¨çš„ Deer Lab ç”Ÿç”¢ç®¡ç†ç³»çµ±éƒ¨ç½²å•é¡Œå·²ç¶“å®Œå…¨è§£æ±ºã€‚ä»¥ä¸‹æ˜¯è§£æ±ºæ–¹æ¡ˆçš„è©³ç´°èªªæ˜ï¼š

## åŸå§‹å•é¡Œ
1. **JavaScript æª”æ¡ˆè¼‰å…¥å¤±æ•—** - ç€è¦½å™¨æ”¶åˆ° HTML è€Œä¸æ˜¯ JavaScript æª”æ¡ˆ
2. **éœæ…‹æª”æ¡ˆè·¯å¾‘éŒ¯èª¤** - `/_next/static/` è·¯å¾‘ç„¡æ³•æ­£ç¢ºè§£æ
3. **SPA è·¯ç”±è¡çª** - éœæ…‹æª”æ¡ˆè·¯ç”±èˆ‡ SPA è·¯ç”±è¦å‰‡è¡çª
4. **å­é é¢é‡æ–°ç™»å…¥** - è·¯ç”±å°èˆªå•é¡Œ
5. **ç´”æ–‡å­—é é¢** - CSS å’Œ JavaScript ç„¡æ³•è¼‰å…¥

## è§£æ±ºæ–¹æ¡ˆ

### 1. ä¿®æ­£ Firebase é…ç½® (`firebase.json`)
```json
{
  "rewrites": [
    {
      "source": "/static/**",
      "destination": "/static/**"
    },
    {
      "source": "/_next/static/**",
      "destination": "/static/**"
    },
    {
      "source": "**",
      "destination": "/index.html"
    }
  ]
}
```

### 2. å„ªåŒ– Next.js é…ç½® (`next.config.mts`)
- è¨­å®šæ­£ç¢ºçš„ `assetPrefix`
- å•Ÿç”¨éœæ…‹åŒ¯å‡ºå„ªåŒ–
- ä¿®æ­£è·¯å¾‘é…ç½®

### 3. æ”¹é€²å»ºç½®æµç¨‹ (`scripts/build-static.js`)
- è‡ªå‹•ä¿®æ­£ HTML æª”æ¡ˆä¸­çš„è·¯å¾‘
- é©—è­‰å»ºç½®çµæœ
- ç¢ºä¿æ‰€æœ‰å¿…è¦æª”æ¡ˆå­˜åœ¨

### 4. è‡ªå‹•åŒ–éƒ¨ç½²
- GitHub Actions å·¥ä½œæµç¨‹
- æœ¬åœ°éƒ¨ç½²è…³æœ¬
- éƒ¨ç½²æ¸¬è©¦é©—è­‰

## é©—è­‰çµæœ

âœ… **æ‰€æœ‰æ¸¬è©¦é€šéï¼**
- ä¸»é é¢æ­£å¸¸è¼‰å…¥
- JavaScript æª”æ¡ˆæ­£ç¢ºè¼‰å…¥
- CSS æ¨£å¼æ­£ç¢ºé¡¯ç¤º
- éœæ…‹æª”æ¡ˆè·¯å¾‘æ­£ç¢º
- è·¯ç”±å°èˆªæ­£å¸¸é‹ä½œ

## éƒ¨ç½²æ–¹æ³•

### å¿«é€Ÿéƒ¨ç½²
```bash
# ä¸€éµéƒ¨ç½²ä¸¦æ¸¬è©¦
npm run deploy-and-test
```

### åˆ†æ­¥é©Ÿéƒ¨ç½²
```bash
# 1. å»ºç½®å°ˆæ¡ˆ
npm run build-static

# 2. éƒ¨ç½²åˆ° Firebase
npm run deploy-only

# 3. æ¸¬è©¦éƒ¨ç½²
npm run test-deployment
```

### GitHub Actions è‡ªå‹•éƒ¨ç½²
æ¨é€ç¨‹å¼ç¢¼åˆ° `main` åˆ†æ”¯æœƒè‡ªå‹•è§¸ç™¼éƒ¨ç½²ã€‚

## æª”æ¡ˆçµæ§‹
```
deer-lab/
â”œâ”€â”€ .github/workflows/deploy.yml    # GitHub Actions
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ build-static.js            # å»ºç½®è…³æœ¬
â”‚   â”œâ”€â”€ test-deployment.js         # æ¸¬è©¦è…³æœ¬
â”‚   â”œâ”€â”€ deploy.sh                  # Linux éƒ¨ç½²è…³æœ¬
â”‚   â””â”€â”€ deploy.bat                 # Windows éƒ¨ç½²è…³æœ¬
â”œâ”€â”€ firebase.json                  # Firebase é…ç½®
â”œâ”€â”€ next.config.mts               # Next.js é…ç½®
â””â”€â”€ package.json                  # å°ˆæ¡ˆé…ç½®
```

## é‡è¦æé†’

1. **è·¯å¾‘ä¿®æ­£**ï¼šæ‰€æœ‰ `/_next/static/` è·¯å¾‘å·²è‡ªå‹•ä¿®æ­£ç‚º `/static/`
2. **å¿«å–è¨­å®š**ï¼šéœæ…‹æª”æ¡ˆå·²è¨­å®šé©ç•¶çš„ Cache-Control æ¨™é ­
3. **å…§å®¹é¡å‹**ï¼šJavaScript å’Œ CSS æª”æ¡ˆå·²è¨­å®šæ­£ç¢ºçš„ Content-Type
4. **SPA è·¯ç”±**ï¼šæ‰€æœ‰è·¯ç”±éƒ½æœƒæ­£ç¢ºå°å‘ `index.html`

## ç›£æ§å»ºè­°

1. **å®šæœŸæª¢æŸ¥**ï¼šä½¿ç”¨ `npm run test-deployment` æª¢æŸ¥éƒ¨ç½²ç‹€æ…‹
2. **ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·**ï¼šæª¢æŸ¥ Console å’Œ Network æ¨™ç±¤
3. **Firebase Console**ï¼šç›£æ§ Hosting ç‹€æ…‹å’ŒéŒ¯èª¤æ—¥èªŒ

## è¯çµ¡æ”¯æ´

å¦‚æœæœªä¾†é‡åˆ°å•é¡Œï¼Œè«‹æä¾›ï¼š
- éŒ¯èª¤è¨Šæ¯æˆªåœ–
- ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·æ—¥èªŒ
- éƒ¨ç½²è…³æœ¬è¼¸å‡º

---

**ğŸ‰ æ­å–œï¼æ‚¨çš„ Deer Lab ç”Ÿç”¢ç®¡ç†ç³»çµ±ç¾åœ¨å·²ç¶“å¯ä»¥æ­£å¸¸é‹ä½œäº†ï¼**
